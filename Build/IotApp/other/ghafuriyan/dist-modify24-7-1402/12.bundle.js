(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{342:function(e,t,a){"use strict";var l=a(297),n=a.n(l),i=a(1),c=a.n(i),r=a(314),o=a(302),s=a(315),u=a(303),m=a(17),d=[{value:"small",label:"سایز کوچگ 1*1"},{value:"medium",label:"سایز متوسط 1*2"},{value:"large",label:"سایز بزرگ 2*2"}],v=[{value:"5m",label:"5 دقیقه قبل"},{value:"30m",label:"30 دقیقه قبل"},{value:"1h",label:"1 ساعت قبل"},{value:"6h",label:"6 ساعت قبل"},{value:"1d",label:"1 روز قبل"}],p=[{value:1,label:"بدون اعشار"},{value:.1,label:"یک رقم اعشار"}];t.a=function(e){var t,a,l=e.onClose,f=e.onSave,b=e.isLoading,g=e.tile,E=e.errors,h=Object(i.useState)(""),N=n()(h,2),y=N[0],x=N[1],w=Object(i.useState)([]),O=n()(w,2),j=O[0],k=O[1],S=Object(i.useState)([]),A=n()(S,2),D=A[0],C=A[1],z=Object(i.useState)([]),M=n()(z,2),F=M[0],R=M[1],T=Object(i.useState)(null),L=n()(T,2),I=L[0],X=L[1],H=Object(i.useState)(null),Y=n()(H,2),P=Y[0],V=Y[1],W=Object(i.useState)(null),G=n()(W,2),_=G[0],U=G[1],q=Object(i.useState)(v[0]),J=n()(q,2),B=J[0],Z=J[1],K=Object(i.useState)(p[0]),Q=n()(K,2),$=Q[0],ee=Q[1],te=Object(i.useState)(null),ae=n()(te,2),le=ae[0],ne=ae[1],ie=Object(i.useState)(!1),ce=n()(ie,2),re=ce[0],oe=ce[1],se=Object(i.useState)(""),ue=n()(se,2),me=ue[0],de=ue[1],ve=Object(i.useState)(!1),pe=n()(ve,2),fe=pe[0],be=pe[1];Object(i.useEffect)((function(){be(!!(P&&_&&""!==y&&I))}),[P,_,y,I]);var ge=Object(i.useRef)(null);Object(i.useEffect)((function(){Ee()}),[]),Object(i.useEffect)((function(){var e;de(re?null===(e=ge.current)||void 0===e?void 0:e.getBoundingClientRect().height:0)}),[re]),Object(i.useEffect)((function(){var e,t,a;null!=P&&null!==(e=P.item)&&void 0!==e&&e.units&&C(Object(s.g)(null==P||null===(a=P.item)||void 0===a?void 0:a.units));"BINARY"===(null==P||null===(t=P.item)||void 0===t?void 0:t.value)&&X(d[0])}),[P]),Object(i.useEffect)((function(){return ne(D[0])}),[D]);var Ee=function(){Object(o.z)().then((function(e){k(Object(s.f)(e))})).catch((function(e){console.log(e)}))};Object(i.useEffect)((function(){U(null),null!=P&&P.value&&Object(o.H)(null==P?void 0:P.value).then((function(e){R(Object(s.e)(e))})).catch((function(e){return console.log(e)}))}),[P]),Object(i.useEffect)((function(){g&&(x(g.title),X((function(){return d.find((function(e){return e.value===g.size}))})),ne((function(){return D.find((function(e){return e.value===g.unit}))})),ee((function(){return p.find((function(e){return e.value===+g.precision}))})),Z((function(){return v.find((function(e){return e.value===g.timeRange}))})),U((function(){return F.find((function(e){return e.value===g.sensor}))})),V((function(){return j.find((function(e){return e.value===g.sensor_type}))})))}),[g,j,F]);return c.a.createElement("div",{className:"mx--15px px-15px mt--15px pt-15px ".concat(m.isMobile?"height-tile-form-custom overflow-y-auto overflow-x-clip":"")},c.a.createElement("div",{className:"position-relative ".concat(m.isMobile?"card px-1 pt-3":"")},c.a.createElement("div",{className:"row row-gap-2 ".concat(m.isMobile?"px-2":"")},c.a.createElement("div",{className:"col-md-4 col-sm-12"},c.a.createElement("div",{className:"form-group "},c.a.createElement("label",{htmlFor:"selectedSensorType",className:"required"},"نوع سنسور"),c.a.createElement(r.a,{className:"autoCompeletSelect ".concat(E&&null!=E&&E.sensor_type?"border-error":""),value:P,onChange:V,options:j,mobileMode:!0,placeholder:"انتخاب کنید"}),E&&null!=E&&E.sensor_type?c.a.createElement("p",{className:"error-field"},null==E?void 0:E.sensor_type[0]):null)),c.a.createElement("div",{className:"col-md-8 col-sm-12 ".concat(m.isMobile?"mt-2":"")},c.a.createElement("div",{className:"form-group "},c.a.createElement("label",{htmlFor:"selectedSensor",className:"required"},"انتخاب سنسور"),c.a.createElement(r.a,{className:"autoCompeletSelect ".concat(E&&null!=E&&E.sensor?"border-error":""),value:_,onChange:U,options:F,mobileMode:!0,placeholder:"انتخاب کنید"}),E&&null!=E&&E.sensor?c.a.createElement("p",{className:"error-field"},null==E?void 0:E.sensor[0]):null))),c.a.createElement("div",{className:"row ".concat(m.isMobile?"px-2":"pt-3")},c.a.createElement("div",{className:"col-md-8 col-sm-12 ".concat(m.isMobile?"mt-2":"")},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"title",className:"required"},"نام سنسور"),c.a.createElement("input",{className:"form-control px-3 ".concat(E&&null!=E&&E.title?"border-error":""),type:"text",id:"title",name:"title",placeholder:"نام دلخواه برای سنسور انتخاب نمایید",value:y,onChange:function(e){return x(e.target.value)}}),E&&null!=E&&E.title?c.a.createElement("p",{className:"error-field"},null==E?void 0:E.title[0]):null)),c.a.createElement("div",{className:"col-md-4 col-sm-12 ".concat(m.isMobile?"mt-2":"")},c.a.createElement("div",{className:"form-group "},c.a.createElement("label",{htmlFor:"provinceSelected",className:"required"},"نوع نمایش"),c.a.createElement(r.a,{className:"autoCompeletSelect ".concat("BINARY"===(null==P||null===(t=P.item)||void 0===t?void 0:t.value)?"disabled":""," ").concat(E&&null!=E&&E.size?"border-error":""),value:I,onChange:X,options:d,mobileMode:!0,placeholder:"انتخاب کنید"}),E&&null!=E&&E.size?c.a.createElement("p",{className:"error-field"},null==E?void 0:E.size[0]):null))),"BINARY"!==(null==P||null===(a=P.item)||void 0===a?void 0:a.value)&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"border-bottom ".concat(m.isMobile?"mx-2 mt-2":"mt-4"," ").concat(m.isMobile&&!re?"":"mb-3")}),c.a.createElement("div",{className:"custom-collapse",style:{height:me}},c.a.createElement("div",{ref:ge},re&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"row ".concat(m.isMobile?"px-2 pb-3":"")},c.a.createElement("div",{className:"col-md-4 col-sm-12 ".concat(m.isMobile?"mt-2":"mt-3")},c.a.createElement("div",{className:"form-group "},c.a.createElement("label",{htmlFor:"provinceSelected"},"بازه زمانی"),c.a.createElement(r.a,{className:"autoCompeletSelect ".concat("large"!==(null==I?void 0:I.value)?"disabled":""),value:B,onChange:Z,options:v,mobileMode:!0,placeholder:"انتخاب کنید"}))),c.a.createElement("div",{className:"col-md-4 col-sm-12 ".concat(m.isMobile?"mt-2":"mt-3")},c.a.createElement("div",{className:"form-group "},c.a.createElement("label",{htmlFor:"selectedDiagramType"},"واحد اندازه گیری"),c.a.createElement(r.a,{className:"autoCompeletSelect ",value:le,onChange:ne,options:D,mobileMode:!0,placeholder:"انتخاب کنید"}))),c.a.createElement("div",{className:"col-md-4 col-sm-12 ".concat(m.isMobile?"mt-2":"mt-3")},c.a.createElement("div",{className:"form-group "},c.a.createElement("label",{htmlFor:"provinceSelected"},"دقت اعشار"),c.a.createElement(r.a,{className:"autoCompeletSelect ",value:$,onChange:ee,options:p,mobileMode:!0,placeholder:"انتخاب کنید"})))),!m.isMobile&&c.a.createElement("div",{className:"border-bottom mt-4 mb-3"})))),c.a.createElement("div",{className:"btn-collapse icon-24 icon-arrow-".concat(re?"up":"down","-primary cursor-pointer"),onClick:function(){return oe((function(e){return!e}))},style:{bottom:"-13px"}}))),c.a.createElement("div",{className:"row justify-content-end"},c.a.createElement("div",{className:"col-12 d-flex justify-content-end ".concat(m.isMobile?"mt-4":"mt-3")},c.a.createElement(u.a,{type:"submit",className:"d-flex button btn-primary-fill justify-content-center align-items-center px-5 ml-3 ".concat(m.isMobile?"width-65 mt-3":""," ").concat(fe?"":"disabled"),handler:function(e){!function(e){var t,a;switch(null==I?void 0:I.value){case"large":t={w:"2",h:"2",x:"0",y:"0"},a="Graph";break;case"medium":t={w:"2",h:"1",x:"0",y:"0"},a="Gauge";break;case"small":default:t={w:"1",h:"1",x:"0",y:"0"},a="Gauge"}var n={title:y,size:null==I?void 0:I.value,unit:null==le?void 0:le.value,precision:null==$?void 0:$.value,timeRange:null==B?void 0:B.value,sensor:null==_?void 0:_.value,sensor_type:null==P?void 0:P.value,status:t,type:a};f&&f(n)&&l&&l()}()},isLoading:b},c.a.createElement("p",{className:"m-0"},"ذخیره")),c.a.createElement(u.a,{type:"submit",className:"d-flex button btn-primary-outline px-5 justify-content-center align-items-center ".concat(m.isMobile?"width-35 mt-3":""),handler:function(e){l?l():history.back()}},c.a.createElement("p",{className:"m-0"},"لغو")))))}},396:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var l=function(e){Object.keys(e).map((function(t,a){e[t]*=1}))}},712:function(e,t,a){"use strict";a.r(t);var l=a(325),n=a.n(l),i=a(297),c=a.n(i),r=a(326),o=a.n(r),s=a(1),u=a.n(s),m=a(37),d=a(302),v=a(11),p=a.n(v),f=a(303),b=a(17),g=function(e){var t=e.onClose,a=e.data,l=e.handleActionTab,n=e.errors,i=Object(s.useState)(""),r=c()(i,2),o=r[0],m=r[1],d=Object(s.useRef)(null);return Object(s.useEffect)((function(){a&&m(a.title)}),[a]),Object(s.useEffect)((function(){d.current.focus()}),[]),u.a.createElement("div",{className:"position-relative"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-md-12 col-sm-12"},u.a.createElement("div",{className:"form-group"},b.isMobile&&u.a.createElement("i",{className:"icon icon-20 icon-close btn-close",onClick:t}),u.a.createElement("label",{htmlFor:"title",className:"required ".concat(b.isMobile?"mb-3":"")},a?"ویرایش نام میزکار":"نام میزکار جدید"),u.a.createElement("input",{className:"form-control px-3 ".concat(n&&null!=n&&n.title?"border-error":""),type:"text",id:"title",name:"title",placeholder:"یک نام برای میزکار خود انتخاب کنید",value:o,ref:d,onChange:function(e){return m(e.target.value)}}),n&&null!=n&&n.title?u.a.createElement("p",{className:"error-field"},null==n?void 0:n.title[0]):null))),u.a.createElement("div",{className:"row justify-content-end"},u.a.createElement("div",{className:"col-12 d-flex justify-content-end"},u.a.createElement(f.a,{type:"submit",className:"d-flex button btn-primary-fill justify-content-center align-items-center px-5 ".concat(b.isMobile&&!a?"w-100 mt-3":"width-65 ml-3"," ").concat(""===o?"disabled":""),handler:function(){l(o)}},u.a.createElement("p",{className:"m-0"},"ذخیره")),(!b.isMobile||b.isMobile&&a)&&u.a.createElement(f.a,{type:"submit",className:"d-flex button btn-primary-outline px-5 justify-content-center align-items-center width-35",handler:function(e){t&&t()}},u.a.createElement("p",{className:"m-0"},"لغو")))))},E=a(310),h=a.n(E);h.a.setAppElement("#root");var N=function(e){var t=e.item,a=e.onEdit,l=e.onDelete,n=e.onClick,i=e.selectedTab,r=e.onEditLayout,o=Object(s.useState)(!1),m=c()(o,2),d=m[0],v=m[1],p=Object(s.useRef)(null),f=function(e){p.current&&!p.current.contains(e.target)&&v(!1)};return Object(s.useEffect)((function(){return document.addEventListener("click",f,!0),function(){document.removeEventListener("click",f,!0)}}),[]),u.a.createElement("div",{className:"position-relative ".concat(d?"dropdown-open":""," ").concat((null==i?void 0:i.id)===t.id?"tab tab-active":"tab")},u.a.createElement("div",{className:"py-2 border-left text-nowrap cursor-pointer ".concat(b.isMobile?"pr-2":"pr-4"," ").concat((null==i?void 0:i.id)===t.id?"":"pl-4")},u.a.createElement("span",{onClick:function(){return n(t)}},null==t?void 0:t.title),(null==i?void 0:i.id)===t.id&&u.a.createElement("div",{className:"icon icon-18 icon-more-vertical mr-1",onClick:function(){return v((function(e){return!e}))}})),b.isMobile?u.a.createElement(h.a,{isOpen:d,onRequestClose:function(){return v(!1)},shouldCloseOnOverlayClick:!0,className:"action-modal pb-2"},u.a.createElement("div",{className:"row justify-content-end mb-3 position-relative"},u.a.createElement("div",{className:"position-absolute btn-close"},u.a.createElement("i",{className:"icon icon-24 icon-close",onClick:function(){return v(!1)}}))),u.a.createElement("div",{className:"row px-2 font-size-14 font-400"},u.a.createElement("div",{className:"col-12 mt-2 px-2"},u.a.createElement("div",{onClick:function(){v(!1),a(t.id)},className:"d-flex tile-dropdown-item py-2 border-bottom border-muted align-items-center cursor-pointer"},u.a.createElement("div",{className:"icon icon-20 icon-edit"}),u.a.createElement("div",{className:"mr-2 text-nowrap"},"ویرایش نام میزکار"))),u.a.createElement("div",{className:"col-12 mt-2 px-2"},u.a.createElement("div",{onClick:function(){v(!1),r()},className:"d-flex tile-dropdown-item py-2 border-bottom border-muted align-items-center cursor-pointer"},u.a.createElement("div",{className:"icon icon-20 icon-moving-tiles"}),u.a.createElement("div",{className:"mr-2 text-nowrap"},"جا به جایی تایل ها"))),u.a.createElement("div",{className:"col-12 px-2"},u.a.createElement("div",{className:"d-flex tile-dropdown-item py-2 align-items-center cursor-pointer",onClick:function(){l(t.id),v(!1)}},u.a.createElement("div",{className:"icon icon-20 icon-delete"}),u.a.createElement("div",{className:"mr-2"},"حذف"))))):u.a.createElement("div",{className:"tile-dropdown position-absolute font-size-14 font-400 px-3 bg-white",ref:p},u.a.createElement("div",{onClick:function(){return a(t.id)},className:"d-flex tile-dropdown-item border-bottom border-muted py-3 align-items-center cursor-pointer"},u.a.createElement("div",{className:"icon icon-20 icon-edit"}),u.a.createElement("div",{className:"mr-2 text-nowrap"},"ویرایش نام میزکار")),u.a.createElement("div",{onClick:function(){v(!1),r()},className:"d-flex tile-dropdown-item border-bottom border-muted py-3 align-items-center cursor-pointer"},u.a.createElement("div",{className:"icon icon-20 icon-moving-tiles"}),u.a.createElement("div",{className:"mr-2 text-nowrap"},"جا به جایی تایل ها")),u.a.createElement("div",{className:"d-flex tile-dropdown-item py-3 align-items-center cursor-pointer",onClick:function(){l(t.id),v(!1)}},u.a.createElement("div",{className:"icon icon-20 icon-delete"}),u.a.createElement("div",{className:"mr-2"},"حذف"))))},y=a(320);a(322);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}h.a.setAppElement("#root");var w,O,j,k,S,A,D,C=function(e){var t=e.tabs,a=e.onLoadTabs,l=e.onClick,n=e.selectedTab,i=e.onEditLayout,r=Object(s.useState)(!1),o=c()(r,2),m=o[0],v=o[1],E=Object(s.useState)(null),w=c()(E,2),O=w[0],j=w[1],k=Object(s.useState)(null),S=c()(k,2),A=S[0],D=S[1],C=function(e){Object(d.J)(e).then((function(e){j(e),v(!0)})).catch((function(e){console.log(e)}))},z=function(e){Object(y.confirmAlert)({customUI:function(t){var l=t.onClose;return u.a.createElement("div",{className:"card card-box"},u.a.createElement("p",{className:"text-dark text-center ".concat(b.isMobile?"mt-3":"")},"آیا از حذف میزکار مطمئن هستید؟"),u.a.createElement("div",{className:"d-flex mt-4 justify-content-center"},u.a.createElement("button",{className:"button btn-primary-fill-outline py-2 px-3 col-6 ml-2 btn-primary-border text-primary bold",onClick:function(){!function(e){Object(d.k)(e).then((function(e){a()})).catch((function(e){console.log(e,": error")}))}(e),l()}},u.a.createElement("span",{className:"py-1 px-3"},"مطمئنم")),u.a.createElement("button",{className:"button btn-primary-fill py-2 px-4 col-6 mr-2 bold",onClick:l},u.a.createElement("span",{className:"py-1 px-3"},"لغو"))))},overlayClassName:"overlay-custom-confirm-modal"})},M=function(){v(!1),j(null),D(null)};return u.a.createElement("section",{className:"card header-dashboard-tab"},u.a.createElement("div",{className:"row align-items-center mx-0 p-3 flex-nowrap ".concat(b.isMobile?"cg-2":"")},u.a.createElement(f.a,{className:"d-flex button btn-primary-fill submit justify-content-center align-items-center ".concat(b.isMobile?"height-auto p-2":"pl-3 pr-3"),handler:function(){return v(!0)}},u.a.createElement("div",{className:"icon icon-24 icon-plus"}),!b.isMobile&&u.a.createElement("div",{className:"mr-2 text-nowrap"},"میزکار جدید")),u.a.createElement("div",{className:"d-flex ".concat(b.isMobile?"overflow-x-auto overflow-y-clip hide-scroll":"")},null==t?void 0:t.map((function(e,t){return u.a.createElement(N,{item:e,key:t,selectedTab:n,onEdit:C,onClick:l,onDelete:z,onEditLayout:i})})))),u.a.createElement(h.a,{isOpen:m,contentLabel:"اضافه کردن تایل",className:"position-unset bg-white",onRequestClose:M,shouldCloseOnOverlayClick:!0},u.a.createElement(g,{onClose:M,data:O,handleActionTab:function(e){if(D(null),O){var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){p()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},O);t.title=e,Object(d.mb)(t,O.id).then((function(e){a(),v(!1),j(null)})).catch((function(e){var t,a,l;D(null==e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a||null===(l=a.error)||void 0===l?void 0:l.details)}))}else{var l={title:e,is_favorite:!1,order:1,field:1};Object(d.b)(l).then((function(e){a(),v(!1),j(null)})).catch((function(e){var t,a,l,n,i,c;403===e.response.status?(v(!1),alert.show(null==e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a||null===(l=a.error)||void 0===l?void 0:l.details.detail,{type:"error"})):D(null==e||null===(n=e.response)||void 0===n||null===(i=n.data)||void 0===i||null===(c=i.error)||void 0===c?void 0:c.details)}))}},errors:A})))},z=a(673),M=a(342),F=a(721),R=a(697),T=a(699),L=a(580),I=a(568),X=a(311),H=a(300),Y=a(328),P=a(684),V=a(698),W=a(329),G=function(e){var t=Object(s.useState)(null),a=c()(t,2),l=a[0],n=a[1],i=Object(s.useState)(),r=c()(i,2),o=(r[0],r[1]),m=Object(s.useState)(),d=c()(m,2),v=(d[0],d[1]);return Object(s.useLayoutEffect)((function(){var t=L.a.new(null==e?void 0:e.id,{useSafeResolution:!1});t.setThemes([W.a.new(t)]);var a=t.container.children.push(F.a.new(t,{panX:!1,panY:!1,startAngle:180,endAngle:360})),l=R.a.new(t,{innerRadius:-1,strokeOpacity:1,strokeWidth:6,strokeGradient:I.a.new(t,{rotation:0,stops:[{color:X.b("#1AD329")},{color:X.b("#F3E523")},{color:X.b("#FC7217")}]})}),i=a.xAxes.push(P.a.new(t,{maxDeviation:0,min:0,max:100,strictMinMax:!0,renderer:l}));i.get("renderer").labels.template.setAll({opacity:0});var c=i.makeDataItem({});c.set("value",null==e?void 0:e.value);var r=c.set("bullet",V.a.new(t,{sprite:T.a.new(t,{topWidth:3,bottomWidth:10,radius:H.d(85),innerRadius:0})}));return r.get("sprite").hand.setAll({fill:X.b("#7e88aa"),strokeWidth:1,fillOpacity:1}),r.get("sprite").pin.setAll({fill:X.b("#EDEFF1"),strokeWidth:2,fillOpacity:1}),i.createAxisRange(c),c.get("grid").set("visible",!1),a.appear(1e3,100),v(a),n(c),o(i),function(){t.dispose()}}),[]),Object(s.useEffect)((function(){l&&l.animate({key:"value",to:+(null==e?void 0:e.value),duration:800,easing:Y.b.out(Y.b.cubic)})}),[null==e?void 0:e.value,null==e?void 0:e.id]),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"col-7 chart-holder p-0",id:null==e?void 0:e.id}))},_=a(693),U=a(685),q=a(700),J=a(701),B=a(702),Z=a(714),K=a(382),Q=a(571),$=a(572),ee=function(e){var t=Object(s.useState)(null),a=c()(t,2),l=a[0],n=a[1],i=Object(s.useState)(null),r=c()(i,2),o=r[0],m=r[1],d=function(e){switch(e.match(/[a-zA-Z]/g)[0]){case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";default:return"hour"}};return Object(s.useLayoutEffect)((function(){var t=L.a.new(null==e?void 0:e.id,{useSafeResolution:!1});t.setThemes([W.a.new(t)]);var a=t.container.children.push(_.a.new(t,{panX:!0,panY:!0,wheelX:"panX",wheelY:"zoomX",pinchZoomX:!0}));a.set("cursor",U.a.new(t,{behavior:"none"})).lineY.set("visible",!1);var l,i,c=q.a.new(t,{});c.labels.template.setAll({centerX:0,pan:"zoom"}),(w=a.xAxes.push(J.a.new(t,{maxDeviation:.1,baseInterval:{timeUnit:d(null==e?void 0:e.interval),count:(l=null==e?void 0:e.interval,i=l.match(/[0-9]/g),parseInt(i.join("")))},start:0,renderer:c,tooltip:K.a.new(t,{labelText:"hi"}),endValue:(new Date).getTime(),minZoomCount:0,maxZoomCount:0}))).get("dateFormats").day="HH:mm",w.get("dateFormats").hour="HH:mm",w.get("dateFormats").minute="HH:mm",w.get("dateFormats").second="HH:mm:ss",w.get("periodChangeDateFormats").day="HH:mm",w.get("periodChangeDateFormats").hour="HH:mm",w.get("periodChangeDateFormats").minute="HH:mm",w.get("periodChangeDateFormats").second="HH:mm:ss";var r=a.yAxes.push(P.a.new(t,{maxDeviation:.1,renderer:B.a.new(t,{pan:"zoom"})})),o=a.series.push(Z.a.new(t,{name:"Series",xAxis:w,yAxis:r,valueYField:"value",valueXField:"date",fill:e.va?X.b("rgba(200, 200, 200, 0)"):X.b("#67b7dc"),stroke:e.fakeData?X.b("rgba(200, 200, 200, 0)"):X.b("#8bc8e5")}));o.fills.template.setAll({visible:!0,fillOpacity:e.fakeData?0:.2}),o.appear(1e3),a.appear(1e3,100),n(t),m(o)}),[]),Object(s.useEffect)((function(){var t=[];null==e||e.value.map((function(e){var a={date:new Date(e.time).getTime(),value:+e.value};t.push(a)})),o&&l&&(o.fills.template.setAll({fill:e.fakeData?X.b("rgba(200, 200, 200, 0)"):X.b("#67b7dc"),stroke:e.fakeData?X.b("rgba(200, 200, 200, 0)"):X.b("#8bc8e5"),fillOpacity:e.fakeData?0:.2}),o.bullets.clear(),o.bullets.push((function(){return Q.a.new(l,{sprite:$.a.new(l,{radius:e.fakeData?0:3,stroke:l.interfaceColors.get("background"),strokeWidth:1,fill:o.get("fill")})})})),o.data.setAll(t))}),[e]),u.a.createElement("div",{className:"col-12 chart-holder graph",id:null==e?void 0:e.id})},te=function(e){var t=e.data,a=e.isOnline,l=e.value,n=e.lastUpdated,i=e.interval,c=e.fakeValues,r=e.graphValue;return u.a.createElement("div",{className:"d-flex flex-wrap ".concat("small"===(null==t?void 0:t.size)?"align-items-center flex-grow-1":"")},u.a.createElement("div",{className:("medium"===(null==t?void 0:t.size)||"large"===(null==t?void 0:t.size)?"col-5 pl-0 ":"col-12 h-100 ")+"d-flex align-items-center"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("div",{className:"icon icon-24 ".concat(a?"icon-Temperature":"icon-temperature-disable")}),u.a.createElement("div",{className:"h3 mr-2 mb-0 bold ".concat(a?"font-30":"font-24")},u.a.createElement("span",{className:""},a?l?l[l.length-1].value:"":"غیرفعال"),a&&u.a.createElement("span",{className:"h6"},t.unit))),!a&&l&&u.a.createElement("div",{className:"tile-description temperature"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("span",null,n," دقیقه قبل :"),u.a.createElement("span",null,t.unit),u.a.createElement("span",null,l&&l[l.length-1].value)))),"medium"===(null==t?void 0:t.size)||"large"===(null==t?void 0:t.size)?l?u.a.createElement(G,{id:"gauge-"+t.id,value:l[l.length-1].value}):u.a.createElement(G,{id:"gauge-"+t.id,unit:null==t?void 0:t.unit,value:0}):null,"large"===(null==t?void 0:t.size)&&i?u.a.createElement(ee,{interval:i,id:"graph-"+t.id,value:(null==r?void 0:r.data)||c,fakeData:!l}):null)},ae=a(703),le=a(704),ne=a(722),ie=a(705),ce=function(e){var t=Object(s.useState)(),a=c()(t,2),l=a[0],n=a[1],i=Object(s.useState)(),r=c()(i,2),o=r[0],m=r[1],d=Object(s.useState)(),v=c()(d,2),p=v[0],f=v[1];return Object(s.useLayoutEffect)((function(){var t=L.a.new(null==e?void 0:e.id,{useSafeResolution:!1});t.setThemes([W.a.new(t)]);var a=t.container.children.push(F.a.new(t,{panX:!1,panY:!1,wheelX:"panX",wheelY:"panX",innerRadius:H.d(82),startAngle:180,endAngle:360}));a.set("cursor",ae.a.new(t,{behavior:"zoomX"})).lineY.set("visible",!1);var l=R.a.new(t,{minGridDistance:50});l.labels.template.setAll({radius:10}),l.grid.template.setAll({forceHidden:!0});var i=a.xAxes.push(P.a.new(t,{renderer:l,min:0,max:100,strictMinMax:!0,numberFormat:"#'%'",visible:!1,tooltip:K.a.new(t,{})})),c=le.a.new(t,{minGridDistance:20});c.labels.template.setAll({centerX:H.b,fontWeight:"500",fontSize:18,templateField:"columnSettings"}),c.grid.template.setAll({forceHidden:!0});var r=a.yAxes.push(ie.a.new(t,{categoryField:"category",renderer:c})),o=a.series.push(ne.a.new(t,{xAxis:i,yAxis:r,clustered:!1,valueXField:"full",categoryYField:"category",fill:t.interfaceColors.get("alternativeBackground")}));o.columns.template.setAll({width:H.b,fillOpacity:.08,strokeOpacity:0,cornerRadius:20});var s=a.series.push(ne.a.new(t,{xAxis:i,yAxis:r,clustered:!1,valueXField:"value",categoryYField:"category",colors:X.b("#23D7FF")}));s.columns.template.setAll({width:H.b,strokeOpacity:0,tooltipText:"{category}: {valueX}%",cornerRadius:20,fill:X.b("#73A6D8"),templateField:"columnSettings"}),o.appear(1e3),s.appear(1e3),a.appear(1e3,100),f(r),n(o),m(s)}),[]),Object(s.useEffect)((function(){var t=[{category:"",value:+(null==e?void 0:e.value),full:100}];p&&p.data.setAll(t),l&&l.data.setAll(t),o&&o.data.setAll(t)}),[e]),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"col-7 position-relative chart-holder p-0",id:null==e?void 0:e.id},u.a.createElement("span",{className:"number-gauge-humidity font-size-md"},null==e?void 0:e.value)))},re=function(e){var t=e.data,a=e.isOnline,l=e.value,n=e.lastUpdated,i=e.interval,c=e.fakeValues,r=e.graphValue;return u.a.createElement("div",{className:"d-flex flex-wrap position-relative h-full".concat("small"===(null==t?void 0:t.size)?"align-items-center flex-grow-1":"")},u.a.createElement("div",{className:"col-5 pl-0 d-flex align-items-center"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("div",{className:"icon icon-24 ".concat(a?"icon-Humidity":"icon-Humidity-disable")}),u.a.createElement("div",{className:"h3 mr-2 mb-0 bold ".concat(a?"font-30":"font-24")},u.a.createElement("span",{className:""},a?l?l[l.length-1].value:"":"غیرفعال"),u.a.createElement("span",{className:"h6"},a?"%":""))),a&&"medium"===(null==t?void 0:t.size)&&u.a.createElement("div",{className:"tile-description"},u.a.createElement("span",{className:"circle humidity"}),u.a.createElement("span",null,"رطوبت")),!a&&l&&u.a.createElement("div",{className:"tile-description temperature"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("span",{className:"text-nowrap"},n," دقیقه قبل :"),u.a.createElement("span",null,"%"),u.a.createElement("span",null,l&&l[l.length-1].value)))),"medium"===(null==t?void 0:t.size)||"large"===(null==t?void 0:t.size)?l?u.a.createElement(ce,{id:"gauge-"+t.id,value:l[l.length-1].value}):u.a.createElement(ce,{id:"gauge-"+t.id,value:0}):null,"large"===(null==t?void 0:t.size)&&i?u.a.createElement(ee,{interval:i,id:"graph-"+t.id,value:(null==r?void 0:r.data)||c,fakeData:!l}):null)},oe=function(e){var t=Object(s.useState)(null),a=c()(t,2),l=a[0],n=a[1],i=Object(s.useState)(),r=c()(i,2),o=r[0],m=r[1],d=Object(s.useState)(),v=c()(d,2),p=v[0],f=v[1];return Object(s.useLayoutEffect)((function(){var t=L.a.new(null==e?void 0:e.id,{useSafeResolution:!1});t.setThemes([W.a.new(t)]),(O=t.container.children.push(F.a.new(t,{panX:!1,panY:!1,wheelX:"panX",wheelY:"panX",innerRadius:H.d(82),startAngle:180,endAngle:360}))).set("cursor",ae.a.new(t,{behavior:"zoomX"})).lineY.set("visible",!1);var a=R.a.new(t,{minGridDistance:30});a.labels.template.setAll({radius:-20}),a.grid.template.setAll({forceHidden:!0});var l=O.xAxes.push(P.a.new(t,{renderer:a,min:0,max:2e3,strictMinMax:!0,numberFormat:"#",visible:!1,fontSize:10,tooltip:K.a.new(t,{})})),i=le.a.new(t,{minGridDistance:20});i.labels.template.setAll({centerX:H.b,fontWeight:"500",fontSize:18,templateField:"columnSettings"}),i.grid.template.setAll({forceHidden:!0});var c=O.yAxes.push(ie.a.new(t,{categoryField:"category",renderer:i})),r=O.series.push(ne.a.new(t,{xAxis:l,yAxis:c,clustered:!1,valueXField:"full",categoryYField:"category",fill:t.interfaceColors.get("alternativeBackground")}));r.columns.template.setAll({width:H.b,fillOpacity:.08,strokeOpacity:0,cornerRadius:20});var o=O.series.push(ne.a.new(t,{xAxis:l,yAxis:c,clustered:!1,valueXField:"value",categoryYField:"category",colors:X.b("#1AD329")}));o.columns.template.setAll({width:H.b,strokeOpacity:0,tooltipText:"{category}: {valueX}%",cornerRadius:20,fill:X.b("#73A6D8"),templateField:"columnSettings"}),r.appear(1e3),o.appear(1e3),O.appear(1e3,100),n(c),m(r),f(o)}),[]),Object(s.useEffect)((function(){var t=[{category:"",value:+(null==e?void 0:e.value),full:2e3,columnSettings:{fill:O.get("colors").getIndex(3)}}];l&&l.data.setAll(t),o&&o.data.setAll(t),p&&p.data.setAll(t)}),[e]),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"col-7 position-relative chart-holder p-0",id:null==e?void 0:e.id},u.a.createElement("span",{className:"number-gauge-humidity font-size-md"},null==e?void 0:e.value)))},se=function(e){var t,a,l,n,i=e.data,c=e.isOnline,r=e.value,o=e.interval,s=e.lastUpdated,m=e.fakeValues,d=e.graphValue;return u.a.createElement("div",{className:"d-flex flex-wrap ".concat("small"===(null==i?void 0:i.size)?"align-items-center flex-grow-1":"")},u.a.createElement("div",{className:"col-5 pl-0 d-flex align-items-center position-relative"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("div",{className:"icon icon-24 ".concat(c?"icon-nitrogen":"icon-nitrogen-disable")}),u.a.createElement("div",{className:"h3 mr-2 mb-0 bold ".concat(c?"font-30":"font-24")},u.a.createElement("span",{className:""},c?r?(null===(t=r[(null==r?void 0:r.length)-1])||void 0===t?void 0:t.value)>1e3?parseInt((null===(a=r[(null==r?void 0:r.length)-1])||void 0===a?void 0:a.value)/10):null===(l=r[(null==r?void 0:r.length)-1])||void 0===l?void 0:l.value:"":"غیرفعال"),u.a.createElement("span",{className:"h6"},r&&(null===(n=r[(null==r?void 0:r.length)-1])||void 0===n?void 0:n.value)>1e3&&c?"g/kg":c?"mg/kg":""))),"medium"===(null==i?void 0:i.size)&&u.a.createElement("div",{className:"tile-description"},u.a.createElement("span",{className:"circle humidity"}),u.a.createElement("span",null,"میزان نیتروژن خاک")),!c&&r&&u.a.createElement("div",{className:"tile-description temperature"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("span",null,s," دقیقه قبل :"),u.a.createElement("span",null,"mg/kg"),u.a.createElement("span",null,r&&r[r.length-1].value)))),("medium"===(null==i?void 0:i.size)||"large"===(null==i?void 0:i.size))&&u.a.createElement(oe,{id:"gauge-"+(null==i?void 0:i.id),value:r?r[r.length-1].value:0}),"large"===(null==i?void 0:i.size)&&o?u.a.createElement(ee,{interval:o,id:"graph-"+i.id,value:(null==d?void 0:d.data)||m,fakeData:!r}):null)},ue=function(e){return Object(s.useLayoutEffect)((function(){var t=L.a.new(null==e?void 0:e.id,{useSafeResolution:!1});t.setThemes([W.a.new(t)]),(A=t.container.children.push(F.a.new(t,{panX:!1,panY:!1,wheelX:"panX",wheelY:"panX",innerRadius:H.d(82),startAngle:180,endAngle:360}))).set("cursor",ae.a.new(t,{behavior:"zoomX"})).lineY.set("visible",!1);var a=R.a.new(t,{minGridDistance:30});a.labels.template.setAll({radius:-20}),a.grid.template.setAll({forceHidden:!0});var l=A.xAxes.push(P.a.new(t,{renderer:a,min:0,max:1e4,strictMinMax:!0,numberFormat:"#",visible:!1,fontSize:10,tooltip:K.a.new(t,{})})),n=le.a.new(t,{minGridDistance:20});n.labels.template.setAll({centerX:H.b,fontWeight:"500",fontSize:18,templateField:"columnSettings"}),n.grid.template.setAll({forceHidden:!0}),S=A.yAxes.push(ie.a.new(t,{categoryField:"category",renderer:n})),(j=A.series.push(ne.a.new(t,{xAxis:l,yAxis:S,clustered:!1,valueXField:"full",categoryYField:"category",fill:t.interfaceColors.get("alternativeBackground")}))).columns.template.setAll({width:H.b,fillOpacity:.08,strokeOpacity:0,cornerRadius:20}),(k=A.series.push(ne.a.new(t,{xAxis:l,yAxis:S,clustered:!1,valueXField:"value",categoryYField:"category",colors:X.b("#1AD329")}))).columns.template.setAll({width:H.b,strokeOpacity:0,tooltipText:"{category}: {valueX}%",cornerRadius:20,fill:X.b("#FC994E"),templateField:"columnSettings"}),j.appear(1e3),k.appear(1e3),A.appear(1e3,100)}),[]),Object(s.useEffect)((function(){var t=[{category:"",value:+(null==e?void 0:e.value),full:1e4}];S.data.setAll(t),j.data.setAll(t),k.data.setAll(t)}),[e]),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"col-7 position-relative chart-holder p-0",id:null==e?void 0:e.id},u.a.createElement("span",{className:"number-gauge-humidity font-size-md"},+(null==e?void 0:e.value))))},me=function(e){var t,a=e.data,l=e.isOnline,n=e.value,i=e.interval,c=e.lastUpdated,r=e.fakeValues,o=e.graphValue;return u.a.createElement("div",{className:"d-flex flex-wrap ".concat("small"===(null==a?void 0:a.size)?"align-items-center flex-grow-1":"")},u.a.createElement("div",{className:"col-5 pl-0 d-flex align-items-center position-relative"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("div",{className:"icon icon-24 ".concat(l?"icon-salinity":"icon-salinity-disable")}),u.a.createElement("div",{className:"h3 mr-2 mb-0 bold ".concat(l?"font-30":"font-24")},u.a.createElement("span",{className:""},l?n?n[n.length-1].value>1e3?parseInt(n[n.length-1].value/10):n[n.length-1].value:"":"غیرفعال"),u.a.createElement("span",{className:"h6"},n&&(null===(t=n[(null==n?void 0:n.length)-1])||void 0===t?void 0:t.value)>1e3&&l?"ms/cm":l?"us/cm":""))),"medium"===(null==a?void 0:a.size)&&u.a.createElement("div",{className:"tile-description"},u.a.createElement("span",{className:"circle humidity"}),u.a.createElement("span",null,"میزان شوری خاک")),!l&&n&&u.a.createElement("div",{className:"tile-description temperature"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("span",null,c," دقیقه قبل :"),u.a.createElement("span",null,"us/cm"),u.a.createElement("span",null,n&&n[n.length-1].value)))),("medium"===(null==a?void 0:a.size)||"large"===(null==a?void 0:a.size))&&u.a.createElement(ue,{id:"gauge-"+(null==a?void 0:a.id),value:n?n[n.length-1].value:0}),"large"===(null==a?void 0:a.size)&&i?u.a.createElement(ee,{interval:i,id:"graph-"+a.id,value:(null==o?void 0:o.data)||r,fakeData:!n}):null)},de=[{color:"#ef5156",lowScore:0,highScore:1.555},{color:"#fc994e",lowScore:1.556,highScore:3.111},{color:"#f3e83e",lowScore:3.1111,highScore:4.666},{color:"#c5da61",lowScore:4.666,highScore:6.221},{color:"#65bd6c",lowScore:6.221,highScore:7.776},{color:"#43c8c7",lowScore:7.776,highScore:9.331},{color:"#73a6d8",lowScore:9.331,highScore:10.886},{color:"#687db6",lowScore:10.886,highScore:12.441},{color:"#645999",lowScore:12.441,highScore:14}],ve=function(e){var t=Object(s.useState)(),a=c()(t,2),l=(a[0],a[1],Object(s.useState)(null)),n=c()(l,2),i=n[0],r=n[1],o=Object(s.useState)(),m=c()(o,2);m[0],m[1];return Object(s.useLayoutEffect)((function(){var t=L.a.new(null==e?void 0:e.id);t.setThemes([W.a.new(t)]);var a=t.container.children.push(F.a.new(t,{panX:!1,panY:!1,startAngle:180,endAngle:360})),l=R.a.new(t,{innerRadius:-7});l.grid.template.setAll({stroke:t.interfaceColors.get("background"),visible:!1,strokeOpacity:.8});var n=a.xAxes.push(P.a.new(t,{maxDeviation:0,min:0,max:14,strictMinMax:!0,renderer:l}));n.get("renderer").labels.template.setAll({opacity:0});var i=(D=n.makeDataItem({})).set("bullet",V.a.new(t,{sprite:T.a.new(t,{topWidth:3,bottomWidth:10,radius:H.d(85),innerRadius:0})}));i.get("sprite").hand.setAll({fill:X.b("#7782a4"),strokeWidth:0,fillOpacity:1}),i.get("sprite").pin.setAll({fill:X.b("#EDEFF1"),strokeWidth:0,fillOpacity:1}),n.createAxisRange(D),a.bulletsContainer.set("mask",void 0),Y.a.each(de,(function(e){var t=n.createAxisRange(n.makeDataItem({}));t.setAll({value:e.lowScore,endValue:e.highScore}),t.get("axisFill").setAll({visible:!0,fill:X.b(e.color),fillOpacity:.8})})),r(n),a.appear(1e3,100)}),[]),Object(s.useEffect)((function(){D.animate({key:"value",to:+(null==e?void 0:e.value),duration:500,easing:Y.b.out(Y.b.cubic)}),i&&i.createAxisRange(D)}),[null==e?void 0:e.value]),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"col-7 position-relative chart-holder p-0",id:null==e?void 0:e.id}))},pe=function(e){var t=e.data,a=e.isOnline,l=e.value,n=e.lastUpdated,i=e.interval,c=e.fakeValues,r=e.graphValue;return u.a.createElement("div",{className:"d-flex flex-wrap ".concat("small"===(null==t?void 0:t.size)?"align-items-center flex-grow-1":"")},u.a.createElement("div",{className:"col-5 pl-0 d-flex align-items-center position-relative"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("div",{className:"icon icon-24 ".concat(a?"icon-acidity":"icon-acidity-disable")}),u.a.createElement("div",{className:"h3 mr-2 mb-0 bold ".concat(a?"font-30":"font-24")},u.a.createElement("span",{className:""},a?l?l[l.length-1].value:"":"غیرفعال"))),!a&&l&&u.a.createElement("div",{className:"tile-description temperature"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("span",null,n," دقیقه قبل :"),u.a.createElement("span",null,l&&l[l.length-1].value)))),("medium"===(null==t?void 0:t.size)||"large"===(null==t?void 0:t.size))&&u.a.createElement(ve,{id:"gauge-"+(null==t?void 0:t.id),value:l?l[l.length-1].value:0}),"large"===(null==t?void 0:t.size)&&i?u.a.createElement(ee,{interval:i,id:"graph-"+t.id,value:(null==r?void 0:r.data)||c,fakeData:!l}):null)},fe=function(e){var t,a,l,n,i=e.data,c=e.isOnline,r=e.value,o=e.interval,s=e.lastUpdated,m=e.fakeValues,d=e.graphValue;return u.a.createElement("div",{className:"d-flex flex-wrap ".concat("small"===(null==i?void 0:i.size)?"align-items-center flex-grow-1":"")},u.a.createElement("div",{className:"col-5 pl-0 d-flex align-items-center position-relative"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("div",{className:"icon icon-24 ".concat(c?"icon-phosphorus":"icon-phosphorus-disable")}),u.a.createElement("div",{className:"h3 mr-2 mb-0 bold ".concat(c?"font-30":"font-24")},u.a.createElement("span",{className:""},c?r?(null===(t=r[(null==r?void 0:r.length)-1])||void 0===t?void 0:t.value)>1e3?parseInt((null===(a=r[(null==r?void 0:r.length)-1])||void 0===a?void 0:a.value)/10):null===(l=r[(null==r?void 0:r.length)-1])||void 0===l?void 0:l.value:"":"غیرفعال"),u.a.createElement("span",{className:"h6"},r&&(null===(n=r[(null==r?void 0:r.length)-1])||void 0===n?void 0:n.value)>1e3&&c?"g/kg":c?"mg/kg":""))),c&&"medium"===(null==i?void 0:i.size)&&u.a.createElement("div",{className:"tile-description"},u.a.createElement("span",{className:"circle humidity"}),u.a.createElement("span",null,"میزان فسفر خاک")),!c&&r&&u.a.createElement("div",{className:"tile-description temperature"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("span",null,s," دقیقه قبل :"),u.a.createElement("span",null,"mg/kg"),u.a.createElement("span",null,r&&r[r.length-1].value)))),"medium"===(null==i?void 0:i.size)||"large"===(null==i?void 0:i.size)?r?u.a.createElement(oe,{id:"gauge-"+i.id,value:r[r.length-1].value}):u.a.createElement(oe,{id:"gauge-"+i.id,value:0}):null,"large"===(null==i?void 0:i.size)&&o?u.a.createElement(ee,{interval:o,id:"graph-"+i.id,value:(null==d?void 0:d.data)||m,fakeData:!r}):null)},be=function(e){var t,a,l,n,i=e.data,c=e.isOnline,r=e.value,o=e.interval,s=e.lastUpdated,m=e.fakeValues,d=e.graphValue;return u.a.createElement("div",{className:"d-flex flex-wrap ".concat("small"===(null==i?void 0:i.size)?"align-items-center flex-grow-1":"")},u.a.createElement("div",{className:"col-5 d-flex align-items-center pl-0 position-relative"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("div",{className:"icon icon-24 ".concat(c?"icon-potassium":"icon-potassium-disable")}),u.a.createElement("div",{className:"h3 mr-2 mb-0 bold ".concat(c?"font-30":"font-24")},u.a.createElement("span",{className:""},c?r?(null===(t=r[(null==r?void 0:r.length)-1])||void 0===t?void 0:t.value)>1e3?parseInt((null===(a=r[(null==r?void 0:r.length)-1])||void 0===a?void 0:a.value)/10):null===(l=r[(null==r?void 0:r.length)-1])||void 0===l?void 0:l.value:"":"غیرفعال"),u.a.createElement("span",{className:"h6"},r&&(null===(n=r[(null==r?void 0:r.length)-1])||void 0===n?void 0:n.value)>1e3&&c?"g/kg":c?"mg/kg":""))),c&&"medium"===(null==i?void 0:i.size)&&u.a.createElement("div",{className:"tile-description"},u.a.createElement("span",{className:"circle humidity"}),u.a.createElement("span",null,"میزان پتاسیم خاک")),!c&&r&&u.a.createElement("div",{className:"tile-description temperature"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("span",null,s," دقیقه قبل :"),u.a.createElement("span",null,"mg/kg"),u.a.createElement("span",null,r&&r[r.length-1].value)))),("medium"===(null==i?void 0:i.size)||"large"===(null==i?void 0:i.size))&&u.a.createElement(oe,{id:"gauge-"+(null==i?void 0:i.id),value:r?r[r.length-1].value:0}),"large"===(null==i?void 0:i.size)&&o?u.a.createElement(ee,{interval:o,id:"graph-"+i.id,value:(null==d?void 0:d.data)||m,fakeData:!r}):null)},ge=function(e){var t=e.isOnline;e.value;return u.a.createElement("div",{className:"d-flex flex-wrap flex-grow-1"},u.a.createElement("div",{className:"col-6 d-flex align-items-center position-relative"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("div",{className:"icon icon-24 ".concat(t?"icon-door-open":"icon-door-disable")}),u.a.createElement("div",{className:"h3 mr-2 mb-0 bold ".concat(t?"font-30":"font-24")},u.a.createElement("span",{className:""},t?"باز":"غیرفعال")))))},Ee=function(e){var t,a,l,n=e.data,i=e.isOnline,c=e.value,r=e.lastUpdated,o=e.interval,s=e.fakeValues,m=e.graphValue;return u.a.createElement("div",{className:"d-flex flex-wrap ".concat("small"===(null==n?void 0:n.size)?"align-items-center flex-grow-1":"")},u.a.createElement("div",{className:"col-5 pl-0 d-flex align-items-center position-relative"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("div",{className:"icon icon-24 ".concat("icon-soil-moisture")}),u.a.createElement("div",{className:"h3 mr-2 mb-0 bold ".concat(i?"font-30":"font-24")},u.a.createElement("span",{className:""},i?c?(null===(t=c[(null==c?void 0:c.length)-1])||void 0===t?void 0:t.value)>1e3?parseInt((null===(a=c[(null==c?void 0:c.length)-1])||void 0===a?void 0:a.value)/10):null===(l=c[(null==c?void 0:c.length)-1])||void 0===l?void 0:l.value:"":"غیرفعال"),u.a.createElement("span",{className:"h6"},i?"%":""))),i&&"medium"===(null==n?void 0:n.size)&&u.a.createElement("div",{className:"tile-description"},u.a.createElement("span",{className:"circle soilMoisture"}),u.a.createElement("span",null,"میزان رطوبت خاک")),!i&&c&&u.a.createElement("div",{className:"tile-description temperature"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("span",null,r," دقیقه قبل :"),u.a.createElement("span",null,"%"),u.a.createElement("span",null,c&&c[c.length-1].value)))),"medium"===(null==n?void 0:n.size)||"large"===(null==n?void 0:n.size)?c?u.a.createElement(ce,{id:"gauge-"+n.id,value:c[c.length-1].value}):u.a.createElement(ce,{id:"gauge-"+n.id,value:0}):null,"large"===(null==n?void 0:n.size)&&o?u.a.createElement(ee,{interval:o,id:"graph-"+n.id,value:(null==m?void 0:m.data)||s,fakeData:!c}):null)},he=function(e){var t=Object(s.useState)(null),a=c()(t,2),l=a[0],n=a[1];return Object(s.useLayoutEffect)((function(){var t=L.a.new(null==e?void 0:e.id,{useSafeResolution:!1});t.setThemes([W.a.new(t)]);var a=t.container.children.push(F.a.new(t,{panX:!1,panY:!1,startAngle:180,endAngle:360})),l=R.a.new(t,{innerRadius:-6,strokeWidth:6,strokeOpacity:0});l.labels.template.set("forceHidden",!0),l.grid.template.set("forceHidden",!0);var i=a.xAxes.push(P.a.new(t,{maxDeviation:0,min:0,max:50,strictMinMax:!0,renderer:l})),c=i.makeDataItem({});c.set("value",0),c.set("endValue",10),i.createAxisRange(c),c.get("axisFill").setAll({visible:!0,fillOpacity:1,fill:X.b("#CEC9BF")});var r=i.makeDataItem({});r.set("value",10),r.set("endValue",16),i.createAxisRange(r),r.get("axisFill").setAll({visible:!0,fillOpacity:1,fill:X.b("#73A6D8")});var o=i.makeDataItem({});o.set("value",16),o.set("endValue",22.5),i.createAxisRange(o),o.get("axisFill").setAll({visible:!0,fillOpacity:1,fill:X.b("#19D228")});var s=i.makeDataItem({});s.set("value",22.5),s.set("endValue",37.5),i.createAxisRange(s),s.get("axisFill").setAll({visible:!0,fillOpacity:1,fill:X.b("#FA7116")});var u=i.makeDataItem({});u.set("value",37.5),u.set("endValue",50),i.createAxisRange(u),u.get("axisFill").setAll({visible:!0,fillOpacity:1,fill:X.b("#CEC9BF")});var m=i.makeDataItem({});m.set("value",null==e?void 0:e.value);var d=m.set("bullet",V.a.new(t,{sprite:T.a.new(t,{topWidth:3,bottomWidth:10,radius:H.d(85),innerRadius:0})}));return d.get("sprite").hand.setAll({fill:X.b("#7e88aa"),strokeWidth:1,fillOpacity:1}),d.get("sprite").pin.setAll({fill:X.b("#EDEFF1"),strokeWidth:2,fillOpacity:1}),i.createAxisRange(m),m.get("grid").set("visible",!1),a.appear(1e3,100),n(m),function(){t.dispose()}}),[]),Object(s.useEffect)((function(){l&&l.animate({key:"value",to:+(null==e?void 0:e.value),duration:800,easing:Y.b.out(Y.b.cubic)})}),[null==e?void 0:e.value,null==e?void 0:e.id]),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"col-7 chart-holder p-0",id:null==e?void 0:e.id}))},Ne=function(e){var t=e.data,a=e.isOnline,l=e.value,n=e.lastUpdated,i=e.interval,c=e.fakeValues,r=e.graphValue;return u.a.createElement("div",{className:"d-flex flex-wrap ".concat("small"===(null==t?void 0:t.size)?"align-items-center flex-grow-1":"")},u.a.createElement("div",{className:"col-5 pl-0 d-flex align-items-center position-relative"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("div",{className:"icon icon-24 ".concat("icon-soil-temperature")}),u.a.createElement("div",{className:"h3 mr-2 mb-0 bold ".concat(a?"font-30":"font-24")},u.a.createElement("span",{className:""},a?l?l[l.length-1].value:"":"غیرفعال"),a&&u.a.createElement("span",{className:"h6"},t.unit))),!a&&l&&u.a.createElement("div",{className:"tile-description temperature"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("span",null,n," دقیقه قبل :"),u.a.createElement("span",null,t.unit),u.a.createElement("span",null,l&&l[l.length-1].value)))),"medium"===(null==t?void 0:t.size)||"large"===(null==t?void 0:t.size)?l?u.a.createElement(he,{id:"gauge-"+t.id,value:l[l.length-1].value}):u.a.createElement(he,{id:"gauge-"+t.id,value:0}):null,"large"===(null==t?void 0:t.size)&&i?u.a.createElement(ee,{interval:i,id:"graph-"+t.id,value:(null==r?void 0:r.data)||c,fakeData:!l}):null)},ye=function(e){var t=e.data,a=e.isOnline,l=e.value,n=e.lastUpdated,i=e.interval,c=e.fakeValues,r=e.graphValue;return u.a.createElement("div",{className:"d-flex flex-wrap ".concat("small"===(null==t?void 0:t.size)?"align-items-center flex-grow-1":"")},u.a.createElement("div",{className:("medium"===(null==t?void 0:t.size)||"large"===(null==t?void 0:t.size)?"col-5 pl-0 ":"col-12 ")+"d-flex align-items-center"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("div",{className:"icon icon-24 ".concat(a?"icon-do":"icon-do-disable")}),u.a.createElement("div",{className:"h3 mr-2 mb-0 bold ".concat(a?"font-30":"font-24")},u.a.createElement("span",{className:""},a?l?l[l.length-1].value:"خاموش":"غیرفعال"))),!a&&l&&u.a.createElement("div",{className:"tile-description temperature"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("span",null,n," دقیقه قبل :"),u.a.createElement("span",null,l&&l[l.length-1].value)))),"medium"===(null==t?void 0:t.size)||"large"===(null==t?void 0:t.size)?l?u.a.createElement(G,{id:"gauge-"+t.id,value:l[l.length-1].value}):u.a.createElement(G,{id:"gauge-"+t.id,value:0}):null,"large"===(null==t?void 0:t.size)&&i?u.a.createElement(ee,{interval:i,id:"graph-"+t.id,value:(null==r?void 0:r.data)||c,fakeData:!l}):null)},xe=function(e){var t,a,l=e.isOnline,n=e.value;return u.a.createElement("div",{className:"d-flex flex-wrap flex-grow-1"},u.a.createElement("div",{className:"col-6 d-flex align-items-center position-relative"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("div",{className:"icon icon-24 ".concat(l?(null==n?void 0:n.length)>0&&1===(null===(t=n[0])||void 0===t?void 0:t.value)?"icon-electricity-natural":"icon-electricity-emergency":"icon-electricity-off")}),u.a.createElement("div",{className:"h3 mr-2 mb-0 bold ".concat(l?"font-30":"font-24")},u.a.createElement("span",{className:""},l?(null==n?void 0:n.length)>0&&1===(null===(a=n[0])||void 0===a?void 0:a.value)?"طبیعی":"اضطراری":"خاموش")))))},we=a(319),Oe=a.n(we),je=a(30),ke=a(39),Se={Temperature:te,Humidity:re,NI:se,EC:me,PH:pe,PHOS:fe,POT:be,Door:ge,Moisture:Ee,SoilTemperature:Ne,DO:ye,ACPower:xe},Ae=[{value:0,time:Oe()().subtract(1,"days").format("YYYY-MM-DD HH:mm:ss")},{value:0,time:Oe()().format("YYYY-MM-DD HH:mm:ss")}],De=Object(m.b)((function(e){return{tilesData:e.tilesData,tilesGraph:e.tilesGraph}}),null)((function(e){var t,a,l,i=e.data,r=e.onRemoveItem,m=e.onEdit,v=e.isDraggable,p=e.tilesData,f=e.selectedTab,g=e.tilesGraph,E=Object(s.useState)(!0),h=c()(E,2),N=h[0],x=h[1],w=Object(s.useState)(!1),O=c()(w,2),j=O[0],k=O[1],S=Object(s.useState)(null),A=c()(S,2),D=A[0],C=A[1],z=Object(s.useState)(null),M=c()(z,2),F=M[0],R=M[1],T=Object(s.useState)(""),L=c()(T,2),I=L[0],X=L[1],H=Object(s.useRef)(null),Y=Object(s.useRef)(null),P=Object(s.useState)(0),V=c()(P,2),W=V[0],G=V[1];Object(s.useEffect)((function(){return document.addEventListener("mousedown",_),function(){document.removeEventListener("mousedown",_)}}),[]),Object(s.useEffect)((function(){var e,t,l,n,c,r;if(a=p.find((function(e){return e.id===(null==i?void 0:i.id)})),X(null!==(e=a)&&void 0!==e&&e.interval?a.interval:"1h"),C((null===(t=a)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.length)>0?null===(n=a)||void 0===n?void 0:n.data:null),x(null===(c=a)||void 0===c?void 0:c.is_online),N&&null!==(r=a)&&void 0!==r&&r.data){var o,s,u,m=Oe()(new Date),d=Oe()(null===(o=a)||void 0===o||null===(s=o.data[(null===(u=a)||void 0===u?void 0:u.data.length)-1])||void 0===s?void 0:s.time),v=m.diff(d,"minutes");G(v)}}),[p]),Object(s.useEffect)((function(){l=g.find((function(e){return e.id===(null==i?void 0:i.id)})),R(l)}),[g]),ke.a.subscribe((function(){l=g.find((function(e){return e.id===(null==i?void 0:i.id)})),R(l)}));var _=function(e){H.current&&!H.current.contains(e.target)&&Y.current&&!Y.current.contains(e.target)&&k(!1)},U=function(){var e=n()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r&&r(i.id),k(!1),e.next=4,Object(d.l)(null==i?void 0:i.id);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=Se[null==i||null===(t=i.sensor_type)||void 0===t?void 0:t.name],J=function(e){e.stopPropagation(),k(!0)};return u.a.createElement("section",{className:"tile-item ".concat("large"===(null==i?void 0:i.size)?"tile-item-large":"tile-item-medium"," ").concat(N?"tile-bg-white":"tile-bg-grey")},u.a.createElement("div",{className:"tile-card position-relative ".concat("small"===(null==i?void 0:i.size)?"h-100 d-flex flex-column":"")},u.a.createElement("div",{className:"tile-header d-flex justify-content-between py-2 px-12 align-items-center border-bottom"},u.a.createElement("div",{className:"title-text h5 mb-0",title:null==i?void 0:i.title},null==i?void 0:i.title),u.a.createElement("div",{className:"icon icon-24 icon-more-vertical cursor-pointer ".concat(v?"disabled":""),ref:Y,onMouseDown:function(e){return J(e)},onTouchStart:function(e){return J(e)}})),q&&u.a.createElement(q,{data:i,isOnline:N,value:D,interval:I,graphValue:F,fakeValues:Ae,lastUpdated:W}),u.a.createElement("div",{className:"tile-dropdown position-absolute px-2 bg-white "+(j?"selected":""),ref:H},b.isMobile?u.a.createElement(je.b,{className:"d-flex tile-dropdown-item border-bottom mx-1 py-2 align-items-center",to:{pathname:"/Panel/Dashboard/AddNewTile/".concat(null==i?void 0:i.id),state:{selectedTab:f}}},u.a.createElement("div",{className:"icon icon-16 icon-edit"}),u.a.createElement("div",{className:"mr-2"},"ویرایش")):u.a.createElement("div",{className:"d-flex tile-dropdown-item border-bottom mx-1 py-2 align-items-center",onClick:function(){return m(null==i?void 0:i.id)}},u.a.createElement("div",{className:"icon icon-16 icon-edit"}),u.a.createElement("div",{className:"mr-2"},"ویرایش")),u.a.createElement("div",{className:"d-flex tile-dropdown-item mx-1 py-2 align-items-center",onClick:function(){Object(y.confirmAlert)({customUI:function(e){var t=e.onClose;return u.a.createElement("div",{className:"card card-box"},u.a.createElement("p",{className:"text-dark text-center ".concat(b.isMobile?"mt-3":"")},"آیا از حذف تایل مطمئن هستید؟"),u.a.createElement("div",{className:"d-flex mt-4 justify-content-center"},u.a.createElement("button",{className:"button btn-primary-fill-outline py-2 px-3 col-6 ml-2 btn-primary-border text-primary bold",onClick:function(){U(),t()}},u.a.createElement("span",{className:"py-1 px-3"},"مطمئنم")),u.a.createElement("button",{className:"button btn-primary-fill py-2 px-4 col-6 mr-2 bold",onClick:t},u.a.createElement("span",{className:"py-1 px-3"},"لغو"))))},overlayClassName:"overlay-custom-confirm-modal"})}},u.a.createElement("div",{className:"icon icon-16 icon-delete"}),u.a.createElement("div",{className:"mr-2"},"حذف")))))}));function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(a),!0).forEach((function(t){p()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Me="".concat("https://static.neshan.org","/sdk/leaflet/1.4.0/leaflet.js");var Fe=function(e){var t=e.style,a=e.options,l=e.onInit,n=Object(s.useRef)(null),i={key:"web.f40d782fbfce47d0b479beb76ed82997",maptype:"dreamy",poi:!0,traffic:!1,center:[35.699739,51.338097],zoom:14};return Object(s.useEffect)((function(){!function(e){var t,a,l;t=e.onError,a=e.onLoad,(l=document.createElement("script")).src=Me,l.onload=function(){a&&a()},l.onerror=function(){t&&t()},document.body.appendChild(l)}({onLoad:function(){var e=new window.L.Map(n.current,ze(ze({},i),a));l&&l(window.L,e)},onError:function(){console.error("Neshan Maps Error: This page didn't load Neshan Maps correctly")}})})),u.a.createElement("div",{ref:n,style:ze(ze({},{width:"712px",height:"461px",margin:0,padding:0,background:"#eee"}),t)})},Re=function(e){var t=e.onClose,a=e.onSubmit,l=e.searchLocation,n=e.centerMap,i=(e.setCenterMap,e.location),r=Object(s.useState)(""),o=c()(r,2),m=o[0],d=o[1],v=Object(s.useState)([null==i?void 0:i.lat,null==i?void 0:i.lng]||!1),p=c()(v,2),b=p[0],g=(p[1],Object(s.useState)(null)),E=c()(g,2),h=E[0],N=E[1],y=Object(s.useState)(null),x=c()(y,2),w=(x[0],x[1]),O=Object(s.useState)(null),j=c()(O,2),k=j[0],S=j[1];Object(s.useEffect)((function(){h&&k&&(h.flyTo([null==n?void 0:n.lat,null==n?void 0:n.lng],11),k.setLatLng(n))}),[n]);return u.a.createElement("div",null,u.a.createElement("div",{className:"d-flex justify-content-between"},u.a.createElement("h4",null,"انتخاب موقعیت مکانی"),u.a.createElement("i",{className:"icon icon-24 icon-close cursor-pointer",onClick:t})),u.a.createElement("div",{className:"search-box mb-3 mt-4 position-relative"},u.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l(m)}},u.a.createElement("label",null,"جستجو"),u.a.createElement("input",{type:"text",value:m,onChange:function(e){return d(e.target.value)},className:"form-control pr-3",placeholder:"استان، شهر، آدرس خود را جستجو کنید"}),u.a.createElement("button",{type:"submit",className:"icon-search-input p-0 border-0 bg-transparent"},u.a.createElement("i",{className:"icon icon-search icon-24 cursor-pointer"})))),u.a.createElement("div",{className:"rounded-12 overflow-hidden"},u.a.createElement(Fe,{options:{key:"web.f40d782fbfce47d0b479beb76ed82997",maptype:"dreamy",poi:!0,traffic:!1,center:b,zoom:13},onInit:function(e,t){var a=e.marker(b).addTo(t).bindPopup("موقعیت مورد نظر");t.on("click",(function(e){a.setLatLng(e.latlng)})),N(t),w(e),S(a)},style:{width:"100%",height:"461px"}})),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-12 d-flex mt-3 justify-content-end"},u.a.createElement(f.a,{className:"button btn-primary-fill py-2 px-5 d-flex align-items-center justify-content-center",handler:a},u.a.createElement("span",{className:"p-1"},"تایید")),u.a.createElement(f.a,{className:"button btn-primary-fill-outline py-2 px-4 btn-primary-border mr-3 d-flex align-items-center justify-content-center",handler:t},u.a.createElement("span",null,"لغو")))))};h.a.setAppElement("#root");var Te={content:{top:"50%",left:"50%",right:"unset",bottom:"unset",transform:"translate(-50%, -50%)",width:"775px",height:"742px"}},Le=function(e){var t,a,l,n,i,r=e.selectedTab,o=e.location,m=e.setLocation,v=Object(s.useState)(null),p=c()(v,2),f=p[0],g=p[1],E=Object(s.useState)([]),N=c()(E,2),y=N[0],x=N[1],w=Object(s.useState)(!1),O=c()(w,2),j=O[0],k=O[1],S=Object(s.useState)(null),A=c()(S,2),D=A[0],C=A[1],z=Object(s.useState)(null),M=c()(z,2),F=M[0],R=M[1],T=function(){k(!1)};Object(s.useEffect)((function(){var e=o?"https://api.weatherapi.com/v1/forecast.json?key=56379b2277c749e59dd113151220810&q=".concat(o.lat,",").concat(o.lng,"&days=5&aqi=no&alerts=no"):"https://api.weatherapi.com/v1/forecast.json?key=56379b2277c749e59dd113151220810&q=Tehran&days=5&aqi=no&alerts=no";fetch(e).then((function(e){return e.json()})).then((function(e){var t;g(null==e?void 0:e.current),x(null==e||null===(t=e.forecast)||void 0===t?void 0:t.forecastday),C(null==e?void 0:e.location)})).catch((function(e){return console.log(e)}))}),[o]);return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"weather bg-white"},u.a.createElement("div",{className:"weather-body"},u.a.createElement("div",{className:"weather-body-primary"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-6 d-flex ".concat(b.isMobile?"flex-column justify-content-center align-items-center":"justify-content-around align-items-baseline")},u.a.createElement("span",{className:"d-flex align-items-center dir-ltr"},null===(t=y[0])||void 0===t||null===(a=t.day)||void 0===a?void 0:a.maxtemp_c,"°C",u.a.createElement("i",{className:"icon icon-22 icon-arrow-up icon-white"})),u.a.createElement("span",{className:"d-flex align-items-center dir-ltr"},null===(l=y[0])||void 0===l||null===(n=l.day)||void 0===n?void 0:n.mintemp_c,"°C",u.a.createElement("i",{className:"icon icon-22 icon-arrow-down icon-white"}))),u.a.createElement("div",{className:"col-6 d-flex justify-content-around align-items-center pl-0"},u.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-start"},u.a.createElement("span",{className:"font-40 dir-ltr"},null==f?void 0:f.temp_c,u.a.createElement("span",{className:"font-24"},"°C")),D&&u.a.createElement("span",null,null==D?void 0:D.country,"، ",null==D?void 0:D.name),u.a.createElement("span",{className:"mt-1 cursor-pointer",onClick:function(){return k(!0)}},u.a.createElement("i",{className:"icon icon-16 icon-map ml-1"}),u.a.createElement("span",{className:"font-9 text-nowrap"},"تغییر موقعیت مکانی"))),u.a.createElement("i",{className:"icon icon-".concat(null!=f&&f.is_day?"day":"night","-weather-").concat(null==f||null===(i=f.condition)||void 0===i?void 0:i.code," ").concat(b.isMobile?"icon-48":"icon-96")})))),u.a.createElement("div",{className:"weather-body-secondary"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"d-flex justify-content-around flex-column font-size-21 ".concat(b.isMobile?"col-6 pr-0":"col-4")},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("i",{className:"icon icon-24 icon-windy ml-2"}),u.a.createElement("span",null,"km/h"),u.a.createElement("span",{className:"mr-2"},null==f?void 0:f.wind_kph)),u.a.createElement("div",{className:"d-flex"},u.a.createElement("i",{className:"icon icon-24 icon-weather-humidity"}),u.a.createElement("span",{className:"mr-2"},null==f?void 0:f.humidity,"%"))),u.a.createElement("div",{className:"d-flex justify-content-between ".concat(b.isMobile?"col-6 overflow-x-auto gap-x-12":"col-8")},null==y?void 0:y.map((function(e,t){var a;return u.a.createElement("div",{className:"weather-future",key:t},u.a.createElement("div",{className:"d-flex flex-column"},u.a.createElement("span",{className:"mt-1 text-left text-nowrap dir-ltr"},parseInt(e.day.maxtemp_c),u.a.createElement("i",{className:"icon icon-18 icon-arrow-up icon-white"})),u.a.createElement("span",{className:"mb-1 text-left text-nowrap dir-ltr"},parseInt(e.day.mintemp_c),u.a.createElement("i",{className:"icon icon-18 icon-arrow-down icon-white"}))),u.a.createElement("i",{className:"icon icon-day-weather-".concat(null===(a=e.day.condition)||void 0===a?void 0:a.code," ").concat(b.isMobile?"icon-16":"icon-24")}),u.a.createElement("span",{className:"".concat(b.isMobile?"font-9":"")},Oe()(e.date).locale("fa").format("dddd")))}))))))),u.a.createElement(h.a,{isOpen:j,onRequestClose:T,style:Te,className:"",contentLabel:"Example Modal"},u.a.createElement(Re,{onClose:T,onSubmit:function(){var e={location:F};Object(d.mb)(e,r).then((function(e){m(null==e?void 0:e.location),T()})).catch((function(e){console.log(e)}))},searchLocation:function(e){fetch("https://api.neshan.org/v1/search?term=".concat(e,"&lat=35.699739&lng=51.338097"),{headers:{"Api-Key":"service.5af3f2ec6ee6420cae20291c0bb815da"}}).then((function(e){return e.json()})).then((function(e){var t,a,l,n;e.count>0&&R({lat:null==e||null===(t=e.items[0])||void 0===t||null===(a=t.location)||void 0===a?void 0:a.y,lng:null==e||null===(l=e.items[0])||void 0===l||null===(n=l.location)||void 0===n?void 0:n.x})})).catch((function(e){return console.log(e)}))},centerMap:F,setCenterMap:R,location:o})))},Ie=a(396);function Xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function He(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(a),!0).forEach((function(t){p()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ye=Object(z.WidthProvider)(z.Responsive);h.a.setAppElement("#root");var Pe,Ve,We={content:{height:"max-content",overflowY:b.isMobile?"auto":"unset"}},Ge=function(e){var t=e.tiles,a=e.selectedTab,l=e.onLayoutChange,i=e.onRemoveItem,r=e.onloadTiles,m=e.onResetLayout,v=e.isDraggable,p=e.layouts,g=e.setLayouts,E=e.setIsDraggable,N=e.location,y=e.setLocation,x=Object(s.useState)(!1),w=c()(x,2),O=w[0],j=w[1],k=Object(s.useState)(null),S=c()(k,2),A=S[0],D=S[1],C=Object(s.useState)(!1),z=c()(C,2),F=z[0],R=z[1],T=Object(s.useState)(null),L=c()(T,2),I=L[0],X=L[1],H=function(){var e=n()(o.a.mark((function e(t){var l,n,i,c,s,u,m,v,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R(!0),l=null,e.prev=2,!A){e.next=10;break}return e.next=6,Object(d.nb)(t,A.id);case 6:l=e.sent,Y(t),e.next=13;break;case 10:return e.next=12,Object(d.c)(t,a.id);case 12:l=e.sent;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),403===(null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n?void 0:n.status)?(j(!1),alert.show(null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(c=i.data)||void 0===c||null===(s=c.error)||void 0===s||null===(u=s.details)||void 0===u?void 0:u.detail,{type:"error"})):X(null===e.t0||void 0===e.t0||null===(m=e.t0.response)||void 0===m||null===(v=m.data)||void 0===v||null===(p=v.error)||void 0===p?void 0:p.details);case 18:R(!1),l&&(j(!1),D(null),r(),alert.show(A?"با موفقیت ویرایش گردید.":"با موفقیت اضافه گردید.",{type:"success"}));case 20:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){var t=JSON.parse(localStorage.getItem("position-".concat(a.id)));Object(Ie.a)(e.status),Object.values(t).map((function(t){if(t.length>0){var a=t.findIndex((function(e){return e.i===A.id.toString()}));t[a].w=e.status.w,t[a].h=e.status.h}})),localStorage.setItem("position-".concat(a.id),JSON.stringify(t)),g(t)},P=function(e){Object(d.L)(e).then((function(e){D(e),j(!0)})).catch((function(e){return console.log(e)}))},V={x:0,y:0,w:4,h:2,static:!0},W=function(e){i&&i(e)},G=function(){j(!1),D(null),X(null)};return u.a.createElement(u.a.Fragment,null,u.a.createElement("section",{className:"".concat(v?"card":"")},u.a.createElement(Ye,{className:"layout rtl react-resizable-handle",rowHeight:160,width:860,layouts:p,onLayoutChange:function(e,t){l&&l(e,t)},isDraggable:v,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:9,md:8,sm:6,xs:4,xxs:2},allowOverlap:!1,isResizable:!0},t.length&&function(){var e=[],l=0;e.push(u.a.createElement("div",{key:0,"data-grid":V},u.a.createElement(Le,{selectedTab:a.id,location:N,setLocation:y})));for(var n=function(n){var i,c,r=t[n],o=function(e){switch(null==e?void 0:e.size){case"small":return{w:1,h:1};case"medium":return{w:2,h:1};case"large":return{w:2,h:2};default:return{w:1,h:1}}}(r),s=(He({x:1===(null==o?void 0:o.w)?4-l%5:3-l%5,y:Math.round(l/5)},o),void 0),m=localStorage.getItem("position-".concat(a.id)),d=void 0;(b.isMobile?d="xxs":b.isTablet?d="sm":!b.isDesktop||(d="lg"),JSON.parse(m)&&JSON.parse(m)[d])?(s=JSON.parse(localStorage.getItem("position-".concat(a.id)))[d].find((function(e){return parseInt(e.i)===r.id})))||(s=He(He({},s=null===(i=t[n])||void 0===i?void 0:i.status),{},{i:r.id})):s=He(He({},s=null===(c=t[n])||void 0===c?void 0:c.status),{},{i:r.id});Object(Ie.a)(s),l=1===(null==o?void 0:o.w)?l+1:l+2,e.push(u.a.createElement("div",{key:null==r?void 0:r.id,"data-grid":s},u.a.createElement(De,{data:r,key:r.id,onRemoveItem:W,onEdit:P,isDraggable:v,selectedTab:a.id})))},i=0;i<t.length;i++)n(i);return e}()),v&&u.a.createElement("div",{className:"d-flex justify-content-end mt-3 px-2 pb-4"},u.a.createElement(f.a,{className:"d-flex button btn-primary-fill height-auto py-1 px-4 justify-content-center align-items-center ml-3",handler:function(){return E(!1)}},u.a.createElement("span",null,"ذخیره تغییرات")),u.a.createElement(f.a,{className:"d-flex button btn-primary-outline btn-primary-border height-auto px-4 py-1 justify-content-center ml-1 align-items-center",handler:m},u.a.createElement("span",{className:""},"لغو تغییرات"))),!v&&(null==a?void 0:a.id)&&(b.isMobile?u.a.createElement(je.b,{className:"tile-item mt-2 add-tile d-flex align-items-center justify-content-center",to:{pathname:"/Panel/Dashboard/AddNewTile",state:{selectedTab:a.id}}},u.a.createElement("i",{className:"icon icon-48 icon-plus-primary"})):u.a.createElement("section",{className:"tile-item mt-2 add-tile d-flex align-items-center justify-content-center",onClick:function(){return j(!0)}},u.a.createElement("i",{className:"icon icon-24 icon-plus-primary"})))),u.a.createElement(h.a,{isOpen:O,contentLabel:"اضافه کردن تایل",className:"position-unset bg-white",onRequestClose:G,shouldCloseOnOverlayClick:!0,style:We},u.a.createElement(M.a,{onSave:function(e){H(e)},onClose:G,isLoading:F,tile:A,errors:I})))},_e=a(686),Ue=a(5);t.default=Object(m.b)(null,(function(e){return{setTilesData:function(t){return e({type:Ue.j,payload:t})},setTileData:function(t){return e({type:Ue.k,payload:t})},addTile:function(t){return e({type:Ue.b,payload:t})},addGraph:function(t){return e({type:Ue.i,payload:t})},updateGraph:function(t){return e({type:Ue.l,payload:t})},resetGraph:function(){return e({type:Ue.h})}}}))((function(e){var t=e.setTilesData,a=e.setTileData,l=(e.addTile,e.resetGraph),i=e.addGraph,r=e.updateGraph,m=Object(s.useState)([]),v=c()(m,2),p=v[0],f=v[1],g=Object(s.useState)({}),E=c()(g,2),h=E[0],N=E[1],y=Object(s.useState)([]),x=c()(y,2),w=x[0],O=x[1],j=Object(s.useState)(!1),k=c()(j,2),S=k[0],A=k[1],D=Object(s.useState)({}),z=c()(D,2),M=z[0],F=z[1],R=Object(s.useState)({}),T=c()(R,2),L=T[0],I=T[1],X=Object(s.useState)(null),H=c()(X,2),Y=H[0],P=H[1];Object(s.useEffect)((function(){Ve=setInterval((function(){null==w||w.map((function(e){"large"===e.size&&Object(d.N)(null==e?void 0:e.id).then((function(e){r(e)})).catch((function(e){return console.log(e)}))}))}),12e4)}),[w]),Object(s.useEffect)((function(){return V(),(Pe=new WebSocket("ws://127.0.0.1/ws/monitoring/".concat(localStorage.getItem("token"),"/"))).onopen=function(){Pe.addEventListener("message",(function(e){var t=JSON.parse(e.data);null!=t&&t.id&&a(t)}))},function(){Pe.close(),clearTimeout(Ve)}}),[]),Object(s.useEffect)((function(){null!=h&&h.id&&(l(),P(null!=h&&h.location?null==h?void 0:h.location:null),W(),setTimeout((function(){1===Pe.readyState&&Pe.send(JSON.stringify({tab_id:null==h?void 0:h.id}))}),2e3))}),[h]),Object(s.useEffect)((function(){l(),w.map((function(e){Object(d.M)(e.id).then((function(e){a(e)})).catch((function(e){return console.log(e)})),"large"===e.size&&Object(d.N)(null==e?void 0:e.id).then((function(e){i(e)})).catch((function(e){return console.log(e)}))}))}),[w]);var V=function(){var e=n()(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.K)();case 2:(t=e.sent)&&(f(t),N(t[0]));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=n()(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.O)(null==h?void 0:h.id);case 2:(a=e.sent)&&(O(a),t(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){localStorage.setItem("position-".concat(h.id),JSON.stringify(L)),F(L),A(!1)};return Object(s.useEffect)((function(){S&&0!==Object.keys(L).length&&G()}),[h]),u.a.createElement("div",{className:""},u.a.createElement(C,{tabs:p,onLoadTabs:V,onEditLayout:function(){I(M),A(!0)},isDraggable:S,onClick:N,selectedTab:h}),u.a.createElement("div",{className:"row mt-3 overflow-auto height-custom ".concat(b.isMobile?"pb-5":"")},u.a.createElement("div",{className:"col-xl-12 col-sm-12"},u.a.createElement(Ge,{tiles:w,selectedTab:h,useCSSTransforms:!0,onRemoveItem:function(e){O(Object(_e.reject)(w,{id:e}))},onLayoutChange:function(e,t){F(t),localStorage.setItem("position-".concat(h.id),JSON.stringify(t))},onloadTiles:W,onResetLayout:G,isDraggable:S,setIsDraggable:A,layouts:M,setLayouts:F,location:Y,setLocation:P}))))}))}}]);