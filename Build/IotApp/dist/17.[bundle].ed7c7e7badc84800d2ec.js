(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{441:function(e,t,a){"use strict";var l=a(325),n=a.n(l),c=a(1),o=a.n(c),r=a(348),i=a(332),u=a(21),s=a(328),m=a(14);t.a=function(e){var t,a=e.handler,l=e.data,d=e.onCancel,f=e.errors,v=Object(m.b)().t,b=[{label:"".concat(v("text.on")),value:"ON"},{label:"".concat(v("text.off")),value:"OFF"},{label:"".concat(v("text.switching")),value:"SWITCH"}],p=Object(c.useState)(null),E=n()(p,2),h=E[0],N=E[1],g=Object(c.useState)(""),j=n()(g,2),O=j[0],x=j[1],w=Object(c.useState)(!1),k=n()(w,2),S=k[0],y=k[1],C=Object(c.useState)(null),M=n()(C,2),_=M[0],B=M[1],q=Object(c.useState)(!1),F=n()(q,2),J=F[0],A=F[1],H=Object(c.useState)(null),I=n()(H,2),R=I[0],T=I[1];Object(c.useEffect)((function(){W()}),[]);var W=function(){Object(s.r)().then((function(e){T(Z(e))})).catch((function(e){return console.log(e)}))},Z=function(e){return e.filter((function(e){var t;return e.id===(null==l||null===(t=l.actuator)||void 0===t?void 0:t.id)||!0!==e.manual_selected})).map((function(e){return{label:"".concat(e.title," - ").concat(null==e?void 0:e.part_number),value:null==e?void 0:e.id}}))};Object(c.useEffect)((function(){A(!(!h||""===O||!(!S&&null===_||S&&null!==_||!S&&null!==_)))}),[h,O,S,_]),Object(c.useEffect)((function(){var e,t;l&&(x(l.title),y(null==l||null===(e=l.alarm)||void 0===e?void 0:e.following),B(null!==(t=l.alarm)&&void 0!==t&&t.condition?b.find((function(e){var t;return e.value===(null===(t=l.alarm)||void 0===t?void 0:t.condition)})):null))}),[l]),Object(c.useEffect)((function(){l&&N(null==R?void 0:R.find((function(e){var t;return e.value===(null===(t=l.actuator)||void 0===t?void 0:t.id)})))}),[R]),Object(c.useEffect)((function(){l||x(null==h?void 0:h.label.split("-")[0].trim())}),[h]);return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-12 col-sm-12 mt-3"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"required"},v("text.Relayselection")),o.a.createElement(r.a,{className:"autoCompeletSelect ".concat(f&&null!=f&&f.actuator?"border-error":""),value:h,onChange:N,options:R,mobileMode:!0,placeholder:v("text.Select")}),f&&null!=f&&f.actuator?o.a.createElement("p",{className:"error-field"},null==f||null===(t=f.actuator)||void 0===t?void 0:t.non_field_errors[0]):null)),o.a.createElement("div",{className:"col-lg-12 col-sm-12 mt-4"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"required"},v("text.automationname")),o.a.createElement("input",{type:"text",value:O,onChange:function(e){return x(e.target.value)},className:"form-control pr-3 ".concat(f&&null!=f&&f.title?"border-error":""),placeholder:v("text.Choosedesirednamerelay")}),f&&null!=f&&f.title?o.a.createElement("p",{className:"error-field"},null==f?void 0:f.title[0]):null)),o.a.createElement("div",{className:"col-lg-12 col-sm-12 mt-4"},o.a.createElement("div",{className:"col-12 ".concat(u.isMobile?"pt-3 pb-4":"pt-3")},o.a.createElement("div",{className:"row ".concat(u.isMobile?"justify-content-between":"pl-2")},o.a.createElement("label",{className:"container-checkbox d-flex align-items-center mb-0"},o.a.createElement("input",{type:"checkbox",name:"automation",checked:S,onChange:function(e){return y(e.target.checked)}}),o.a.createElement("span",{className:"checkmark"}),o.a.createElement("span",{className:"radio-text text-wrap"},v("text.Analarmactivatedduringrelayoperation"))),o.a.createElement("div",{className:"px-0 ".concat(u.isMobile?"col-12 mt-3":"")},o.a.createElement(r.a,{className:"autoCompeletSelect pl-0 ".concat(S?"":"disabled"),value:_,onChange:B,options:b,mobileMode:!0,placeholder:v("text.Select")}))))),o.a.createElement("div",{className:"col-12 d-flex mt-5 ".concat(u.isMobile?"position-absolute btn-bottom-form":"")},o.a.createElement(i.a,{className:"button btn-primary-fill mt-4 p-2 d-flex align-items-center justify-content-center ".concat(u.isMobile?"width-65":"w-50"," ").concat(J?"":"disabled"),handler:function(){var e={title:O,lock:!l||(null==l?void 0:l.lock),actuator:{id:h.value},active:!l||(null==l?void 0:l.active),alarm:{condition:S&&_?null==_?void 0:_.value:null,set_point:null,following:S}};a(e)}},o.a.createElement("span",{className:"p-1"},v("text.confirm"))),o.a.createElement(i.a,{className:"button btn-primary-fill-outline mt-4 mr-3 d-flex align-items-center justify-content-center ".concat(u.isMobile?"width-35":"w-50"),handler:d},o.a.createElement("span",null,v("text.cancel")))))}},828:function(e,t,a){"use strict";a.r(t);var l=a(325),n=a.n(l),c=a(1),o=a.n(c),r=a(441),i=a(4),u=a(328),s=a(21);t.default=function(){var e=Object(c.useState)(null),t=n()(e,2),a=t[0],l=t[1],m=Object(c.useState)(null),d=n()(m,2),f=d[0],v=d[1],b=Object(i.g)(),p=Object(i.i)().id;Object(c.useEffect)((function(){p&&Object(u.Z)(p).then((function(e){l(e)})).catch((function(e){return console.log(e)}))}),[]);return o.a.createElement("div",{className:"row ".concat(s.isMobile?"px-3":"")},o.a.createElement("div",{className:"col-12 card overflow-auto height-automation-form-custom"},o.a.createElement(r.a,{onCancel:function(){return b.goBack()},handler:function(e){v(null),a?Object(u.hb)(e,a.id).then((function(){b.goBack(),l(null)})).catch((function(e){var t;return v(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t||null===(t=t.error)||void 0===t?void 0:t.details)})):Object(u.e)(e).then((function(){b.goBack()})).catch((function(e){var t;return v(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t||null===(t=t.error)||void 0===t?void 0:t.details)}))},data:a,errors:f})))}}}]);