(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{447:function(e,t,a){"use strict";var n=a(325),l=a.n(n),c=a(1),r=a.n(c),i=a(328),o=a(21),s=a(332),m=a(14),d=function(e){var t=e.data,a=e.handler,n=(e.isOpenDevice,e.onClose),i=e.onChange,d=e.errorDevice,u=e.errors,v=Object(m.b)().t,p=Object(c.useState)(""),f=l()(p,2),b=f[0],x=f[1],E=Object(c.useState)(""),N=l()(E,2),h=N[0],g=N[1],y=Object(c.useState)(!1),j=l()(y,2),w=j[0],k=j[1];Object(c.useEffect)((function(){t&&(x(t.title),g(t.part_number))}),[t]),Object(c.useEffect)((function(){k(!((""===b||!t)&&t||""===h||"exist"===d))}),[b,h,d]);var O=function(){a(t?{title:b,part_number:h}:{part_number:h})},C=function(){x(""),g(""),n()};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"bold text-dark text-nowrap ".concat(o.isMobile?"text-right":"text-center")},v(t?"text.Editdeviceinformation":"text.Addnewdevice")),o.isMobile&&r.a.createElement("i",{className:"icon icon-24 icon-close",onClick:C})),t&&r.a.createElement("div",{className:"col-lg-12 col-sm-12 ".concat(o.isMobile?"px-0 mt-3":"mt-4 pt-2")},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name",className:"required"}," ",v("text.devicename")),r.a.createElement("input",{type:"text",id:"title",value:b,onChange:function(e){return x(e.target.value)},className:"form-control pr-3 ".concat(u&&null!=u&&u.title?"border-error":""),placeholder:v("text.Enterdevicename")}),u&&null!=u&&u.title?r.a.createElement("p",{className:"error-field"},null==u?void 0:u.title[0]):null)),r.a.createElement("div",{className:"col-lg-12 col-sm-12 pt-2 ".concat(o.isMobile?"px-0 mt-3 pb-3":"mt-4")},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name",className:"required"},v("text.Serialnumberdevice")),r.a.createElement("input",{type:"text",id:"name",value:h,onChange:function(e){i(e.target.value),g(e.target.value)},className:"form-control pr-3 ".concat(t?"disabled":""," ").concat(u&&null!=u&&u.part_number?"border-error":""),placeholder:v("text.forexampleserial")}),u&&null!=u&&u.non_field_errors?r.a.createElement("p",{className:"error-field"},null==u?void 0:u.non_field_errors[0]):null,"exist"===d?r.a.createElement("p",{className:"error-field danger-text"},"این شماره سریال قبلا ثبت شده است."):"notFound"===d?r.a.createElement("p",{className:"error-field danger-text"},"شماره سریال وارد شده وجود ندارد."):null)),r.a.createElement("div",{className:"col-12 d-flex justify-content-end ".concat(o.isMobile?"px-0":"mt-5")},r.a.createElement(s.a,{className:"d-flex align-items-center button justify-content-center btn-primary-fill mx-2 px-4 ".concat(o.isMobile?"width-65":""," ").concat(w?"":"disabled"),handler:function(){O()}},r.a.createElement("span",{className:"px-2"},v("text.confirm"))),r.a.createElement(s.a,{className:"d-flex align-items-center button justify-content-center btn-primary-outline mr-2 px-4 ".concat(o.isMobile?"width-35":"btn-primary-border"),handler:C},r.a.createElement("span",{className:"px-2"},v("text.cancel")))))},u=a(45),v=a(46),p=a(354),f=a(337),b=a.n(f),x={content:{top:"50%",left:"50%",right:"unset",bottom:"unset"}};b.a.setAppElement("#root");t.a=function(e){var t=e.collapse,a=Object(m.b)().t,n=Object(c.useState)(null),f=l()(n,2),E=f[0],N=f[1],h=Object(c.useState)([]),g=l()(h,2),y=g[0],j=(g[1],Object(c.useState)([])),w=l()(j,2),k=w[0],O=w[1],C=Object(c.useState)([]),M=l()(C,2),_=M[0],S=M[1],F=Object(c.useState)(""),q=l()(F,2),A=q[0],D=q[1],R=Object(c.useState)(""),z=l()(R,2),I=z[0],J=z[1],B=Object(c.useRef)(null),G=Object(c.useState)(!1),L=l()(G,2),U=L[0],H=L[1],K=Object(c.useState)(null),P=l()(K,2),Q=P[0],T=P[1],V=Object(c.useState)(""),W=l()(V,2),X=W[0],Y=W[1];Object(c.useEffect)((function(){var e;t&&!o.isMobile?J((null===(e=B.current)||void 0===e?void 0:e.getBoundingClientRect().height)+16):J(0)}),[t]);var Z=function(e,t){"sensor"===t?te(e):ae(e)},$=function(e){console.log(e),Object(p.confirmAlert)({customUI:function(t){var n=t.onClose;return r.a.createElement("div",{className:"card card-box w-75"},r.a.createElement("p",{className:"text-dark text-center ".concat(o.isMobile?"mt-3":"")},a("text.areyousuredeletedevice"),"(",null==e?void 0:e.title,")"),r.a.createElement("div",{className:"d-flex mt-4 justify-content-center"},r.a.createElement("button",{className:"button btn-primary-fill-outline py-2 px-3 col-6 mx-2 btn-primary-border text-primary bold",onClick:function(){var t;t={part_number:e.part_number},Object(i.i)(t).then((function(e){ee()})).catch((function(e){return console.log(e)})),n()}},r.a.createElement("span",{className:"py-1 px-3"},a("text.Iamsure"))),r.a.createElement("button",{className:"button btn-primary-fill py-2 px-4 col-6 mr-2 bold",onClick:n},r.a.createElement("span",{className:"py-1 px-3"},a("text.cancel")))))},overlayClassName:"overlay-custom-confirm-modal"})},ee=function(){Object(i.A)().then((function(e){O(null==e?void 0:e.sensors),S(null==e?void 0:e.actuators)})).catch((function(e){return console.log(e)}))},te=function(e){Object(i.G)(e).then((function(e){N(e),D("sensor"),H(!0)})).catch((function(e){return console.log(e)}))},ae=function(e){Object(i.q)(e).then((function(e){N(e),D("actuator"),H(!0)})).catch((function(e){return console.log(e)}))};Object(c.useEffect)((function(){ee()}),[]);var ne=function(){N(null),H(!1),T(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mx--15px px-30px mt--15px pt-15px ".concat(o.isMobile?"height-user-custom overflow-auto":"custom-collapse overflow-hidden"),style:o.isMobile?{height:"calc(100vh - 129px)"}:{height:I}},r.a.createElement("section",{className:"".concat(o.isMobile?"row":"px-2"),ref:B},r.a.createElement("div",{className:"device-management-table ".concat(o.isMobile?"col-12":"")},!o.isMobile&&r.a.createElement("div",{className:"row mx-0"},r.a.createElement("div",{className:"col-4 px-2 device-management-table-header"},a("text.devicename")),r.a.createElement("div",{className:"col px-2 device-management-table-header"},a("text.parameter")),r.a.createElement("div",{className:"col px-2 device-management-table-header"},a("text.Serialnumberdevice")),r.a.createElement("div",{className:"col px-2 device-management-table-header"})),!o.isMobile&&(null==k?void 0:k.map((function(e){var t;return r.a.createElement("div",{key:(null==e?void 0:e.id)+204,className:"row font-500 font-size-14 mx-0 device-management-table-body align-items-center"},r.a.createElement("div",{className:"col-4 px-2 text-dark"},null==e?void 0:e.title),r.a.createElement("div",{className:"col px-2"},null==e||null===(t=e.type)||void 0===t?void 0:t.title),r.a.createElement("div",{className:"col px-2"},null==e?void 0:e.part_number),r.a.createElement("div",{className:"col px-2 d-flex align-items-center justify-content-center"},r.a.createElement("i",{className:"icon icon-24 icon-delete mx-2 cursor-pointer",onClick:function(){return $(e)}}),r.a.createElement("i",{className:"icon icon-24 icon-edit mr-2 cursor-pointer",onClick:function(){return Z(e.id,"sensor")}})))}))),!o.isMobile&&(null==_?void 0:_.map((function(e){var t;return r.a.createElement("div",{key:(null==e?void 0:e.id)+105,className:"row font-500 font-size-14 mx-0 device-management-table-body align-items-center"},r.a.createElement("div",{className:"col-4 px-2 text-dark"},null==e?void 0:e.title),r.a.createElement("div",{className:"col px-2"},null==e||null===(t=e.type)||void 0===t?void 0:t.title),r.a.createElement("div",{className:"col px-2"},null==e?void 0:e.part_number),r.a.createElement("div",{className:"col px-2 d-flex align-items-center justify-content-center"},r.a.createElement("i",{className:"icon icon-24 icon-delete mx-2 cursor-pointer",onClick:function(){return $(e)}}),r.a.createElement("i",{className:"icon icon-24 icon-edit mr-2 cursor-pointer",onClick:function(){return Z(e.id,"actuator")}})))}))),o.isMobile&&(null==k?void 0:k.map((function(e){var t;return r.a.createElement("div",{className:"row card mb-12px py-3",key:(null==e?void 0:e.id)+305},r.a.createElement("div",{className:"col-12 d-flex flex-column"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"bold"}," ",a("text.devicename")," : ",r.a.createElement("span",{className:"text-dark"},e.title)),r.a.createElement("div",{className:"bold"},a("text.parameter"),": ",r.a.createElement("span",{className:"text-dark"},null==e||null===(t=e.type)||void 0===t?void 0:t.title))),r.a.createElement("div",{className:"d-flex justify-content-between mt-3"},r.a.createElement("div",{className:"bold"},a("text.Serialnumberdevice")," : ",r.a.createElement("span",{className:"text-dark"},e.part_number)),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"ml-3 cursor-pointer",key:e.id+101,onClick:function(){return Z(e.id,"sensor")},target:"_new"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("img",{src:u.a,width:20,title:a("text.edit")}))),r.a.createElement("div",{className:"cursor-pointer",key:e.id+102,onClick:function(){return $(e)},target:"_new"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("img",{src:v.a,width:20,title:"".concat(a("text.delete"))})))))))}))),o.isMobile&&(null==_?void 0:_.map((function(e){var t;return r.a.createElement("div",{className:"row card mb-12px py-3",key:(null==e?void 0:e.id)+405},r.a.createElement("div",{className:"col-12 d-flex flex-column"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"bold"}," ",a("text.devicename")," : ",r.a.createElement("span",{className:"text-dark"},e.title)),r.a.createElement("div",{className:"bold"},a("text.parameter"),": ",r.a.createElement("span",{className:"text-dark"},null==e||null===(t=e.type)||void 0===t?void 0:t.title))),r.a.createElement("div",{className:"d-flex justify-content-between mt-3"},r.a.createElement("div",{className:"bold"},a("text.Serialnumberdevice")," : ",r.a.createElement("span",{className:"text-dark"},e.part_number)),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"ml-3 cursor-pointer",key:e.id+101,onClick:function(){return Z(e.id,"actuator")},target:"_new"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("img",{src:u.a,width:20,title:a("text.edit")}))),r.a.createElement("div",{className:"cursor-pointer",key:e.id+102,onClick:function(){return $(e)},target:"_new"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("img",{src:v.a,width:20,title:"".concat(a("text.delete"))})))))))})))),r.a.createElement("div",{className:"".concat(o.isMobile?"":"mt-3")},r.a.createElement(s.a,{className:"button btn-primary-fill p-2 height-auto",handler:function(){return H((function(e){return!e}))}},r.a.createElement("i",{className:"icon icon-24 icon-plus"}))))),r.a.createElement(b.a,{isOpen:U,onRequestClose:ne,style:x,contentLabel:"Example Modal",className:"p-3 bg-white"},r.a.createElement(d,{data:E,onChange:function(e){Y(y.some((function(t){return t.part_number===e}))?"exist":"")},errorDevice:X,handler:function(e){E?"sensor"===A?Object(i.lb)(null==E?void 0:E.id,e).then((function(e){ee(),ne()})).catch((function(e){var t;return T(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t||null===(t=t.error)||void 0===t?void 0:t.details)})):Object(i.gb)(null==E?void 0:E.id,e).then((function(e){ee(),ne()})).catch((function(e){var t;return T(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t||null===(t=t.error)||void 0===t?void 0:t.details)})):e&&Object(i.a)(e).then((function(e){ee(),ne()})).catch((function(e){var t,a,n;console.log(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t||null===(t=t.error)||void 0===t?void 0:t.details),T(null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a||null===(a=a.error)||void 0===a?void 0:a.details),"یافت نشد."===(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n||null===(n=n.error)||void 0===n||null===(n=n.details)||void 0===n?void 0:n.detail)&&Y("notFound")}))},isOpenDevice:U,onClose:ne,errors:Q})))}},830:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),c=a(447);t.default=function(){return l.a.createElement(c.a,{collapse:!0})}}}]);