(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{734:function(e,t,a){"use strict";a.r(t);var n=a(37),c=a.n(n),l=a(165),r=a.n(l),o=a(11),s=a.n(o),i=a(139),m=a.n(i),u=a(166),b=a.n(u),d=a(0),p=a.n(d),f=a(31),E=(a(192),a(180),a(294),a(181)),h=a.n(E),x=a(146),N=a(147),y=a(21),v=(a(34),a(35),a(184),a(169),a(182),a(487),a(488));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var j={content:{top:"50%",left:"50%",right:"unset",bottom:"unset",transform:"translate(-50%, -50%)"}};h.a.setAppElement("#root");t.default=function(){var e=Object(d.useState)(!1),t=m()(e,2),a=t[0],n=t[1],l=Object(d.useState)(""),o=m()(l,2),i=o[0],u=o[1],E=Object(d.useState)(!1),w=m()(E,2),O=w[0],k=w[1],M=Object(d.useState)(!1),S=m()(M,2),C=S[0],P=S[1],D=Object(d.useState)(!1),R=m()(D,2),q=R[0],F=R[1],L=Object(d.useState)([]),J=m()(L,2),A=J[0],I=J[1],Q=Object(d.useState)(!1),z=m()(Q,2),B=z[0],G=z[1],H=Object(d.useState)(!1),K=m()(H,2),T=K[0],U=K[1],V=Object(d.useState)(!1),W=m()(V,2),X=W[0],Y=W[1],Z=Object(d.useState)({}),$=m()(Z,2),_=$[0],ee=$[1],te=Object(d.useState)(!1),ae=m()(te,2),ne=ae[0],ce=ae[1];Object(d.useEffect)((function(){le(),re(),oe(),se()}),[]);var le=function(){Object(x.y)().then((function(e){e.automation?(n(!0),u(e.automation)):n(!1)})).catch((function(e){return console.log(e)}))},re=function(){Object(x.n)().then((function(e){e&&Y(!0)})).catch((function(e){return console.log(e)})),Object(x.p)().then((function(e){e&&G(!0)})).catch((function(e){return console.log(e)})),Object(x.o)().then((function(e){e&&U(!0)})).catch((function(e){return console.log(e)}))},oe=function(){Object(x.u)().then((function(e){I(e)})).catch((function(e){return console.log(e)}))},se=function(){Object(x.v)().then((function(e){ee(e)})).catch((function(e){return console.log(e)}))},ie=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},_);t[e.target.value]=e.target.checked,Object(x.R)(t).then((function(e){se()})).catch((function(e){return console.log(e)}))},me=function(){var e=r()(b.a.mark((function e(t,a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={active:t},Object(x.Q)(a,n).then((function(){var e=A.findIndex((function(e){return e.id===a})),n=A[e];n.active=t;var l=c()(A);l[e]=n,I(l)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ue=function(e){var t={automation:e.target.value};"manual"===e.target.value?T?Object(x.S)(t).then((function(e){return le()})).catch((function(e){return console.log(e)})):F(!0):Object(x.S)(t).then((function(e){return le()})).catch((function(e){return console.log(e)}))};return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col pb-4"},p.a.createElement("div",{className:"settings row"},p.a.createElement("div",{className:"col-lg-7 col-sm-12"},p.a.createElement("section",{className:"row card card-box ".concat(y.isMobile?"px-3":"")},p.a.createElement("div",{className:"col border-bottom ".concat(y.isMobile?"py-4 px-0":"p-4")},p.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},p.a.createElement("h6",{className:"bold mb-0 text-dark"},"اتوماسیون"),p.a.createElement("label",{className:"switch"},p.a.createElement("input",{type:"checkbox",checked:a,onChange:function(){return k(!0)}}),p.a.createElement("span",{className:"slider round"})))),p.a.createElement("div",{className:"col d-flex justify-content-between ".concat(y.isMobile?"flex-column py-4 px-0":"flex-row p-4")},p.a.createElement("div",{className:"".concat(y.isMobile?"mb-4":""," ").concat(a?"":"disabled-text")},p.a.createElement("span",null,"اتوماسیون")),p.a.createElement("div",{className:"d-flex ".concat(y.isMobile?"justify-content-between":"")},p.a.createElement("label",{className:"container-radio ".concat(y.isMobile?"":"ml-5"," ").concat(a?"":"disabled"," ").concat(T?"":"disabled")},p.a.createElement("input",{type:"radio",name:"automation",checked:"manual"===i,value:"manual",onChange:ue}),p.a.createElement("span",{className:"radio-mark"}),p.a.createElement("span",{className:"radio-text"},"دستی")),p.a.createElement("label",{className:"container-radio ".concat(y.isMobile?"":"ml-5"," ").concat(a?"":"disabled"," ").concat(X?"":"disabled")},p.a.createElement("input",{type:"radio",name:"automation",checked:"automatic"===i,value:"automatic",onChange:ue}),p.a.createElement("span",{className:"radio-mark"}),p.a.createElement("span",{className:"radio-text"},"اتوماتیک")),p.a.createElement("label",{className:"container-radio ".concat(a?"":"disabled"," ").concat(B?"":"disabled")},p.a.createElement("input",{type:"radio",name:"automation",checked:"smart"===i,value:"smart",onChange:ue}),p.a.createElement("span",{className:"radio-mark"}),p.a.createElement("span",{className:"radio-text"},"هوشمند"))))),p.a.createElement("section",{className:"row card card-box mt-3 ".concat(y.isMobile?"px-3":"")},p.a.createElement("div",{className:"col border-bottom ".concat(y.isMobile?"py-4 px-0":"p-4")},p.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},p.a.createElement("h6",{className:"bold mb-0 text-dark text-break"},"وضعیت هشدار ها مطابق با بخش اتوماسیون های تعریف شده"),p.a.createElement("div",null,p.a.createElement("label",{className:"switch"},p.a.createElement("input",{type:"checkbox",checked:A.every((function(e){return!0===e.active})),onChange:function(e){return t=e.target.checked,void Promise.all(A.map((function(e){me(t,e.id)})));var t}}),p.a.createElement("span",{className:"slider round"}))))),p.a.createElement("div",{className:"col-12 ".concat(y.isMobile?"px-0":"px-4")},A.length>0&&A.map((function(e){return p.a.createElement("div",{key:e.id+100,className:"col border-bottom d-flex justify-content-between align-items-center ".concat(y.isMobile?"px-0 py-3":"py-3 px-0")},p.a.createElement("p",{className:"mb-0 py-1"},null==e?void 0:e.title),p.a.createElement("label",{className:"switch ml-2"},p.a.createElement("input",{type:"checkbox",checked:e.active,onChange:function(t){return me(t.target.checked,e.id)}}),p.a.createElement("span",{className:"slider round"})))})),p.a.createElement("div",{className:"col d-flex justify-content-between ".concat(y.isMobile?"flex-column px-0 pt-3 pb-4":"flex-row py-4 px-0")},p.a.createElement("div",{className:"".concat(y.isMobile?"pb-3":"")},p.a.createElement("span",{className:"".concat(y.isMobile?"mb-1":"")},"نوع هشدار")),p.a.createElement("div",{className:"d-flex ".concat(y.isMobile?"justify-content-between":"pl-2 ml-1")},p.a.createElement("label",{className:"container-checkbox ".concat(y.isMobile?"":"ml-5")},p.a.createElement("input",{type:"checkbox",name:"automation",value:"message",checked:_.message,onChange:function(e){return ie(e)}}),p.a.createElement("span",{className:"checkmark"}),p.a.createElement("span",{className:"radio-text"},"پیامک")),p.a.createElement("label",{className:"container-checkbox ".concat(y.isMobile?"":"ml-5")},p.a.createElement("input",{type:"checkbox",name:"automation",value:"telegram",checked:_.telegram,onChange:function(e){return ie(e)}}),p.a.createElement("span",{className:"checkmark"}),p.a.createElement("span",{className:"radio-text"},"تلگرام")),p.a.createElement("label",{className:"container-checkbox"},p.a.createElement("input",{type:"checkbox",name:"automation",value:"email",checked:_.email,onChange:function(e){return ie(e)}}),p.a.createElement("span",{className:"checkmark"}),p.a.createElement("span",{className:"radio-text"},"ایمیل")))))),p.a.createElement("section",{className:"row card card-box mt-3 ".concat(y.isMobile?"px-3":""," ").concat(ne?"pb-3":"")},p.a.createElement("div",{className:""},p.a.createElement("div",{className:"d-flex justify-content-between align-items-center ".concat(y.isMobile?"py-4 px-0":"p-4")},p.a.createElement("h6",{className:"bold mb-0 text-dark"},"مدیریت دستگاه ها"),y.isMobile?p.a.createElement(f.b,{to:"/Panel/Dashboard/Settings/DeviceManagement"},p.a.createElement("i",{className:"icon icon-24 icon-arrow-down management-device-arrow mobile"})):p.a.createElement("i",{className:"icon icon-24 icon-arrow-down management-device-arrow cursor-pointer ".concat(ne?"rotate-left":""),onClick:function(){return ce((function(e){return!e}))}}))),y.isMobile?null:p.a.createElement(v.a,{collapse:ne})),p.a.createElement("div",{className:"row mt-4"},p.a.createElement("div",{className:"col-12 p-0 d-flex justify-content-end"}))),p.a.createElement("div",{className:"col-5"}))),p.a.createElement(h.a,{isOpen:O,onRequestClose:function(){return k(!1)},style:j,contentLabel:"Example Modal"},a?p.a.createElement(p.a.Fragment,null,p.a.createElement("p",{className:"text-center ".concat(y.isMobile?"pb-3":"pb-0")},"با غیر فعال کردن اتوماسیون کلیه سنسور های شما تا زمان فعال کردن مجدد خاموش خواهد ماند."),p.a.createElement("div",{className:"d-flex ".concat(y.isMobile?"mt-3":"mt-5")},p.a.createElement(N.a,{className:"d-flex align-items-center button justify-content-center btn-primary-outline ml-2 w-50 btn-primary-border",handler:function(){Object(x.S)({automation:null}).then((function(e){le(),u(null)})).catch((function(e){return console.log(e)})),n(!1),k(!1)}},p.a.createElement("span",null,"غیرفعال شود")),p.a.createElement(N.a,{className:"d-flex align-items-center button justify-content-center btn-primary-fill mr-2 w-50",type:"reset",handler:function(){return k(!1)}},p.a.createElement("span",null,"لغو")))):p.a.createElement(p.a.Fragment,null,p.a.createElement("p",{className:"text-center ".concat(y.isMobile?"pb-3":"pb-0")},"با فعال کردن اتوماسیون مطابق ضابطه های از پیش تعریف شده سیستم اتوماسیون فعال می شود و ممکن است برخی از رله ها روشن یا خاموش شوند، آیا مطمئن هستید؟"),p.a.createElement("div",{className:"d-flex ".concat(y.isMobile?"mt-3":"mt-5")},p.a.createElement(N.a,{className:"d-flex align-items-center button justify-content-center btn-primary-outline ml-2 w-50 btn-primary-border",handler:function(){Object(x.S)({automation:"manual"}).then((function(e){return le()})).catch((function(e){return console.log(e)})),n(!0),k(!1)}},p.a.createElement("span",null,"فعال شود")),p.a.createElement(N.a,{className:"d-flex align-items-center button justify-content-center btn-primary-fill mr-2 w-50",type:"reset",handler:function(){return k(!1)}},p.a.createElement("span",null,"لغو"))))),p.a.createElement(h.a,{isOpen:C,onRequestClose:function(){return P(!1)},style:j,contentLabel:"Example Modal"},p.a.createElement("p",{className:"text-center ".concat(y.isMobile?"pb-3":"pb-0")},"بدون انتخاب یکی از گزینه های اتوماسیون، امکان ذخیره تنظیمات وجود ندارد.لطفا انتخاب و سپس ذخیره نمایید."),p.a.createElement("div",{className:"d-flex justify-content-center ".concat(y.isMobile?"mt-3":"mt-5")},p.a.createElement(N.a,{className:"d-flex align-items-center button justify-content-center btn-primary-fill mr-2 w-50",type:"reset",handler:function(){return P(!1)}},p.a.createElement("span",null,"متوجه شدم")))),p.a.createElement(h.a,{isOpen:q,onRequestClose:function(){return F(!1)},style:j,contentLabel:"Example Modal"},p.a.createElement("p",{className:"text-center ".concat(y.isMobile?"pb-3":"pb-0")},"کاربر عزیز متاسفانه شما برای اتوماسیون دستی خود تنظیماتی را انجام نداده اید."),p.a.createElement("div",{className:"d-flex justify-content-center ".concat(y.isMobile?"mt-3":"mt-5")},p.a.createElement(N.a,{className:"d-flex align-items-center button justify-content-center btn-primary-fill ml-2 w-50",handler:function(){u("manual"),F(!1)}},p.a.createElement("span",null,"افزودن")),p.a.createElement(N.a,{className:"d-flex align-items-center button justify-content-center btn-primary-outline mr-2 w-50 btn-primary-border",type:"reset",handler:function(){return F(!1)}},p.a.createElement("span",null,"فعلا نه")))))}}}]);